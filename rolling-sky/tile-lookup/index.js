PopupManager.setupPopup();function program(){function a(){c.value=parseInt(c.value),c.value>RollingSky.maxtile&&(c.value=RollingSky.maxtile),0>c.value&&(c.value=0),""==c.value&&(c.value=0),d.className=c.value?parseInt(c.value):"0";var a=obstacledat.obstacles[parseInt(d.className)],b="No GeoBuffers / Types (Yet)";0==!a.geobuffers.all.length&&(b=a.geotype);var h="No Geobuffers",j="";if(j=a.geotype+" ("+PrefabType[a.geotype]+")",0<a.geobuffers.all.length){h="";for(var k=0;k<a.geobuffers.all.length;k++)h+=a.geobuffers.all[k]+","+a.geotype+",#<br>"}var l=function(a){const b=Lang.special.tileset.imgwidth,c=Lang.special.tileset.gridsize;a--;const d=Math.floor(a/(b/c)),e=a%(b/c);return{x:e*c,y:d*c}}(parseInt(c.value));g.innerHTML="#previewicon{background: var(--tileset01) -"+l.x+"px -"+l.y+"px;}",e.innerHTML="<c-lb>Name</c-lb>: "+a.name+"<br><c-lb>GeoBuffers</c-lb>: "+a.geobuffers.all.join(", ")+"<br><c-lb>GeoType</c-lb>: "+j,f.innerHTML=h}function b(){try{function g(a){const b=a.trim().split("\n");let d=[];for(let c=0;c<b.length;c++){const a=b[c],[e,f,g]=a.split(",");let h=-1;for(let a=0;a<d.length;a++)if(e===d[a].split(",")[0]){h=a;break}if(-1!==h){const a=d[h].split(",")[2],b=parseInt(a)+parseInt(g);d[h]=`${e},${f},${b}`}else d.push(a)}return d.forEach((a,b)=>{d[b]=a.split(",")[0]+","+a.split(",")[1]+","+(parseInt(a.split(",")[2])+c).clamp(1,100)}),d.join("\n")}var a=h.value,b="";b=a.startsWith("[header]")?a.split(/data=\r|data=\n|data=\r\n/)[1]:a;var c=parseInt(i.value);const l=b.split(/\r?\n/);l.reverse();const m={};for(let a=0;a<l.length;a+=25){const b=l.slice(a,a+25),c={};b.forEach(a=>{a.split(",").forEach(a=>{c[a]=(c[a]||0)+1})}),Object.keys(c).forEach(a=>{(!m[a]||c[a]>m[a])&&(m[a]=c[a])})}var d=[],e=j.value.split(/\r?\n/),f=[];e.forEach(a=>{f.push(parseInt(a.split(",")[0]))}),Object.keys(m).forEach(a=>{if(a&&(console.log(a),!f.includes(a))){var b=m[a],c=obstacledat.obstacles[a],e=c.geobuffers.all[0];e&&d.push(`${e},${c.geotype},${b.clamp(1,100)}`)}}),k.value=g(d.join("\n"))}catch{k.value="malformed input"}}const c=document.getElementById("lookup"),d=document.getElementById("previewicon"),e=document.getElementById("innerdata"),f=document.getElementById("geoexp"),g=document.querySelector("#tile"),h=document.querySelector("#levelgeo"),i=document.querySelector("#levelgeopad"),j=document.querySelector("#geo0"),k=document.querySelector("#geolevel"),l=window.location.search,m=new URLSearchParams(l),n=m.get("t");null!=n&&(c.value=n),c.addEventListener("input",function(){a()}),h.addEventListener("input",function(){b()}),i.addEventListener("input",function(){b()}),j.addEventListener("input",function(){b()});var o=document.querySelector(".clicktooltrigger0");document.querySelector("#z").addEventListener("click",()=>{o.parentElement.style.display="none",o.parentElement.nextElementSibling.style.display="block"});var p=document.querySelector(".clicktooltrigger1");p.addEventListener("click",()=>{p.parentElement.style.display="none",p.parentElement.previousElementSibling.style.display="block"}),window.onload=function(){a(),b()}}document.getElementById("version").innerHTML=obstacledat.version;for(var changelogarray=obstacledat.changelog.split(";"),finalchangelogarray=[],i=0;i<changelogarray.length;i++)finalchangelogarray.push("<li>"+changelogarray[i]+"</li>");document.getElementById("changelog").innerHTML=finalchangelogarray.join(""),program();function fallbackCopyTextToClipboard(a){var b=document.createElement("textarea");b.value=a,b.style.top="0",b.style.left="0",b.style.position="fixed",b.style.opacity="0",b.style.display="none",document.body.appendChild(b),b.focus(),b.select();try{var c=document.execCommand("copy"),d=c?"successful":"unsuccessful"}catch{console.error("Unable to copy text: \""+a+"\"")}document.body.removeChild(b)}function copyTextToClipboard(a){return navigator.clipboard?void navigator.clipboard.writeText(a).then(function(){},function(){}):void fallbackCopyTextToClipboard(a)}Number.prototype.clamp=function(a,b){return Math.min(Math.max(this,a),b)};function copyTextToClipboardUser(a){copyTextToClipboard(a),PopupManager.showMessage("copy ok","message")}