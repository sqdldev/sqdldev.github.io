PopupManager.setupPopup();const loaderTips=["Tip: Set the opacity of an element that you don't want in your spritesheet to 0%.","Tip: Use the Custom Assets feature to customize the patterns and colors in your spritesheet.",'Tip: Check the "Show Minimal Options" checkbox to only show colors that are used by the settings you have chosen.',"Tip: Use the Download Project feature to download a portable .RS project file that is much smaller than a PNG which can be put back into the SpriteMaker if you need to make any changes.",'Tip: If elements are missing from the canvas, click the "Redraw Canvas" button.',"Tip: Did you accidentally close the SpriteMaker? Use the Load Previous Project feature to load a project file that was saved before you closed the tab.","Tip: Use Palette Order to make your own custom palettes! You should edit the JSON in an external editor though.",],View={OpenedViews:[],TopmostView:"",Open:e=>(console.log("Open View",e),!!View.ViewData[e]&&!View.OpenedViews.includes(e)&&(View.IsOpen=!0,View.OpenedViews.unshift(e),View.TopmostView=View.OpenedViews[0],!0)),Close:e=>(console.log("Close View",e),!!(View.ViewData[e]&&View.OpenedViews.includes(e))&&(View.IsOpen=!1,View.OpenedViews=View.OpenedViews.filter(t=>t!==e),View.TopmostView=View.OpenedViews[0],!0)),ViewData:{LoaderMenu:{IsOpen:!1},MainMenu:{IsOpen:!1},MainEditor:{IsOpen:!1},ObstaclePreview:{IsOpen:!1},CollectionManager:{IsOpen:!1}}};document.querySelector("#loaderTip").innerHTML=loaderTips[Math.floor(Math.random()*loaderTips.length)];var currentDrawTimeoutAlt,currentDrawTimeout,canvas=document.querySelector("#main");const context=canvas.getContext("2d",{willReadFrequently:!0});jscolor.presets.default.backgroundColor="var(--jscolorElementBackgroundColor)",jscolor.presets.default.borderColor="var(--jscolorElementBorderColor)",LevelEncryptor.setup();var changelog=["add spritesheet collection feature"];document.querySelector("#changelog").innerHTML="<span>Changelog:</span><br><ul><li>"+changelog.join("</li><li>")+"</li>";var local=RegExp("^(file|local|192.|172.|127.|10.)");function checkForUpdates(){fetch("version.json").catch(()=>{}).then(e=>e.json()).catch(()=>{window.hidePage(),PopupManager.showMessage('Local version JSON file is either missing or unable to be found. SpriteMaker cannot start.<br><br>Click the button below to be shown a tutorial on how to run SpriteMaker on a local machine.<br><button onclick="window.showLocalMachineTutorial()">Tutorial</button>',"Error",["Leave>closeTab()~default"],!1)}).then(e=>{window.spritemakerVersion=e.current;var t=document.querySelector(".title");t.innerHTML+=" v"+spritemakerVersion,fetch("https://sqdldev.github.io/rolling-sky/spritesheet-creator/version.json").catch(()=>{}).then(e=>e.json()).catch(()=>{loadAll()}).then(e=>{try{window.spritemakerLatestVersion=e.current,isLocallyHosted&&versionGreater(window.spritemakerLatestVersion,window.spritemakerVersion)&&PopupManager.showMessage("You have SpriteMaker version "+window.spritemakerVersion+".<br><br>The latest version of SpriteMaker is version "+window.spritemakerLatestVersion+'.<br><br>Please update your local version of SpriteMaker <a href="https://github.com/sqdldev/sqdldev.github.io/tree/main/rolling-sky/spritesheet-creator" target="_blank">here</a>.',"Your local copy of SpriteMaker is outdated."),loadAll()}catch{}}).catch(()=>{})}).catch(()=>{})}function versionGreater(e,t){let r=e.split("."),o=t.split(".");for(let a=0;a<r.length;a++){let l=parseInt(r[a]),n=parseInt(o[a]);if(l<n)return!1;if(l>n)return!0}return r.length<o.length}window.isLocallyHosted=local.test(window.location.host)||""==window.location.host,checkForUpdates();const processingDots=document.querySelector("#processingDots");var SpriteMaker={Data:{tintCanvas:document.querySelector("#tintCanvas"),tintContext:this.tintCanvas.getContext("2d"),tintedImageCount:0,TintImage(e,t,r,o){if(SpriteMaker.Data.tintedImageCount++,SpriteMaker.Data.tintedImageCount>500){console.log("RENDERING LIMIT REACHED!!!");return}SpriteMaker.Data.alreadyDrawNames.push(r),SpriteMaker.Data.tintContext.clearRect(0,0,512,512),console.log("recoloring",r);var a=vcache.Get(r+"."+t);if(void 0!=a){console.log("get from cache",r);var l=new Image;return l.src=a,l}if("#ffffff"==t.toLowerCase())return e;function n(e){e.length>6&&(e=e.slice(0,7));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}SpriteMaker.Data.tintContext.drawImage(e,0,0);let i=SpriteMaker.Data.tintContext.getImageData(0,0,SpriteMaker.Data.tintCanvas.width,SpriteMaker.Data.tintCanvas.height),p=i.data,m=p.length;var c=255,d=n(t);if(9==t.length&&(c=parseInt(t.slice(-2),16)),255==c&&1==o)for(let s=0;s<m;s+=4)p[s+3]>5&&(p[s]*=d.r/255,p[s+1]*=d.g/255,p[s+2]*=d.b/255);else for(let g=0;g<m;g+=4)p[g+3]>5&&(p[g]*=d.r/255,p[g+1]*=d.g/255,p[g+2]*=d.b/255,p[g+3]*=c*o/255);var l=new Image;SpriteMaker.Data.tintContext.putImageData(i,0,0);var u=SpriteMaker.Data.tintCanvas.toDataURL();return l.src=u,vcache.Add(r+"."+t,u),l},isDrawing:!1,alreadyDraw:[],alreadyDrawNames:[],to:void 0,Draw(e,t,r=!1){function o(e){let t=0,r=e.length;console.log("preparing",e);var o=!0;function a(){let l=e[t][0],n=e[t][1][0]||0,p=e[t][1][1]||0;try{function m(){SpriteMaker.Data.alreadyDraw.to=setTimeout(()=>{!SpriteMaker.Data.alreadyDraw.includes(t)&&(SpriteMaker.Data.alreadyDraw.push(t),context.drawImage(l,n,p),console.log("drawing progress",t+1,"/",r),++t<r&&o?a():o=!1,t>=r&&(i(),SpriteMaker.Data.tintedImageCount=0,SpriteMaker.Data.isDrawing=!1,SpriteMaker.Data.alreadyDraw=[],SpriteMaker.Data.alreadyDrawNames=[],TimeAnnotation.Write(),""!=CollectionManager.CurrentlyEditing&&CollectionManager.UpdateReplace(CollectionManager.CurrentlyEditing,!0)))},0)}l.src.startsWith("data")||o&&m(),l.complete&&o&&m(),l.addEventListener("load",m),l.addEventListener("error",m)}catch{console.log("image error",e[t],e)}}a()}function a(t,r,o,a=1,l=[0,0]){if(!r&&!o){window.f.push([SpriteMaker.Data.TintImage(ImageAssets[t],"#ffffff",t,a),l]);return}window.visibleOptions.push(r+"."+o);var n=e.GetProperty(r,o);"00"!=n.slice(7,9)&&window.f.push([SpriteMaker.Data.TintImage(ImageAssets[t],n,t,a),l])}function l(e,t,r,o=1){window.f.push([SpriteMaker.Data.TintImage(ImageAssets[e],t,e,o),r])}function n(){processingDots.classList.add("active")}function i(){processingDots.classList.remove("active")}function p(r,o){window.visibleOptions.push(r+"."+o);var a=context.fillStyle;context.fillStyle=e.GetProperty(r,o),console.log("fill bg",context.fillStyle),context.fillRect(0,0,t.width,t.height),context.fillStyle=a}function m(e,t,r,o){var a=context.fillStyle;context.fillStyle=e,console.log("fill section",e,t,r,o),context.fillRect(t[0]+o[0],t[1]+o[1],r[0],r[1]),context.fillStyle=a}function c(e,t){window.wd[e]=t}function d(e){wd[e]&&window.wd[e]()}SpriteMaker.Data.isDrawing||context.clearRect(0,0,t.width,t.height),SpriteMaker.Data.isDrawing=!0,r&&(context.clearRect(0,0,t.width,t.height),clearTimeout(SpriteMaker.Data.to),SpriteMaker.Data.alreadyDraw=[],SpriteMaker.Data.alreadyDrawNames=[]),context.globalAlpha=1,window.f=[],window.visibleOptions=[],window.wd={},n();var s=e.Type;switch(s){case 0:a("enemy_laserCenterBackground","Laser_Center","Laser_Center"),a("enemy_laserCenter","Laser_Center","Laser_Color"),a("enemy_laserCenterBorder","Laser_Center","Laser_Outline");var g=e.GetValue("Laser_Beam","Mode");switch(g){case 0:a("enemy_laserBeamBackground","Laser_Beam","Laser_Center_1"),a("enemy_laserBeam","Laser_Beam","Laser_Color_1");break;case 1:a("enemy_laserBeam1Background","Laser_Beam","Laser_Center_1"),a("enemy_laserBeam1","Laser_Beam","Laser_Color_1"),a("enemy_laserBeam2Background","Laser_Beam","Laser_Center_1"),a("enemy_laserBeam2","Laser_Beam","Laser_Color_1"),a("enemy_laserBeam3Background","Laser_Beam","Laser_Center_2"),a("enemy_laserBeam3","Laser_Beam","Laser_Color_2"),a("enemy_laserBeam4Background","Laser_Beam","Laser_Center_2"),a("enemy_laserBeam4","Laser_Beam","Laser_Color_2");break;case 2:a("enemy_laserBeam1Background","Laser_Beam","Laser_Center_1"),a("enemy_laserBeam1","Laser_Beam","Laser_Color_1"),a("enemy_laserBeam2Background","Laser_Beam","Laser_Center_2"),a("enemy_laserBeam2","Laser_Beam","Laser_Color_2"),a("enemy_laserBeam3Background","Laser_Beam","Laser_Center_3"),a("enemy_laserBeam3","Laser_Beam","Laser_Color_3"),a("enemy_laserBeam4Background","Laser_Beam","Laser_Center_4"),a("enemy_laserBeam4","Laser_Beam","Laser_Color_4")}var u=e.GetValue("Main_Stripe","Type");switch(a("enemy_stripeBackgroundLeft","Main_Stripe","Background"),u){case 0:break;case 1:a("enemy_stripeDefaultColorLeft","Main_Stripe","Color"),a("enemy_stripeDefaultShadowLeft","Main_Stripe","Shadow");break;case 2:a("enemy_stripeSplitColorLeft","Main_Stripe","Color"),a("enemy_stripeSplitShadowLeft","Main_Stripe","Shadow");break;case 3:a("enemy_stripeWideColorLeft","Main_Stripe","Color"),a("enemy_stripeWideShadowLeft","Main_Stripe","Shadow");break;case 4:a("enemy_stripeIgniteColorLeft","Main_Stripe","Color")}var y=e.GetValue("Alternate_Stripe","Type"),h=1==e.GetValue("Alternate_Stripe","Always_On_Top");function _(){switch(a("enemy_stripeBackgroundRight","Alternate_Stripe","Background"),y){case 0:break;case 1:a("enemy_stripeDefaultColorRight","Alternate_Stripe","Color"),a("enemy_stripeDefaultShadowRight","Alternate_Stripe","Shadow");break;case 2:a("enemy_stripeSplitColorRight","Alternate_Stripe","Color"),a("enemy_stripeSplitShadowRight","Alternate_Stripe","Shadow");break;case 3:a("enemy_stripeWideColorRight","Alternate_Stripe","Color"),a("enemy_stripeWideShadowRight","Alternate_Stripe","Shadow");break;case 4:a("enemy_stripeRight1-1","Alternate_Stripe","Color_1"),a("enemy_stripeRight1-2","Alternate_Stripe","Color_2"),a("enemy_stripeRight1-3","Alternate_Stripe","Color_3"),a("enemy_stripeRight1-4","Alternate_Stripe","Color_4");break;case 5:a("enemy_stripeRight2-1","Alternate_Stripe","Color_1"),a("enemy_stripeRight2-2","Alternate_Stripe","Color_2"),a("enemy_stripeRight2-3","Alternate_Stripe","Color_3"),a("enemy_stripeRight2-3-1","Alternate_Stripe","Color_4");break;case 6:a("enemy_stripeBackgroundRight","Alternate_Stripe","Color_4"),a("enemy_stripeRight3","Alternate_Stripe","Color_1")}}h?c("Alternate_Stripes",_):_();var f=e.GetValue("Top_Right","Type"),$=!1;switch(f){case 0:a("enemy_topRightBackgroundWide","Top_Right","Background"),a("enemy_topRightStarColor_l","Top_Right","Star_Inactive_Color"),a("enemy_topRightStarColor_r","Top_Right","Star_Active_Color"),a("enemy_topRightStarShadow_l","Top_Right","Star_Inactive_Shadow_Color"),a("enemy_topRightStarShadow_r","Top_Right","Star_Active_Shadow_Color");break;case 1:1==e.GetValue("Top_Right","Background_Type")?a("enemy_topRightBackgroundPalette","Top_Right","Background"):a("enemy_topRightBackground","Top_Right","Background");var v=e.GetProperty("Top_Right","Palette_Order");if(console.log(v),window.visibleOptions.push("Top_Right.Palette_Order"),v)try{var C=JSON.parse(v);function b(){C.elements.forEach(e=>{try{var t=[512,0];switch(e.position){case 1:t=[256,0];break;case 2:t=[320,0];break;case 3:t=[384,0];break;case 4:t=[448,0];break;case 5:t=[256,64];break;case 6:t=[320,64];break;case 7:t=[384,64];break;case 8:t=[448,64];break;case 9:t=[256,128];break;case 10:t=[320,128];break;case 11:t=[384,128];break;case 12:t=[448,128]}var r=e.colors;switch(e.type){case 0:l("enemy_topRightPalette0",r[0],t);break;case 1:l("enemy_topRightPalette1-1",r[0],t),l("enemy_topRightPalette1-2",r[1],t),l("enemy_topRightPalette1-3",r[2],t),l("enemy_topRightPalette1-4",r[3],t);break;case 2:l("enemy_topRightPalette2-1",r[0],t),l("enemy_topRightPalette2-2",r[1],t),l("enemy_topRightPalette2-3",r[2],t),l("enemy_topRightPalette2-4",r[3],t),l("enemy_topRightPalette2-5",r[4],t),l("enemy_topRightPalette2-6",r[5],t);break;case 3:l("enemy_topRightPalette3-1",r[0],t),l("enemy_topRightPalette3-2",r[1],t),l("enemy_topRightPalette3-3",r[1],t),l("enemy_topRightPalette3-4",r[2],t),l("enemy_topRightPalette3-5",r[3],t),l("enemy_topRightPalette3-6",r[4],t);break;case 4:l("enemy_topRightPalette3-1",r[0],t),l("enemy_topRightPalette3-2",r[1],t),l("enemy_topRightPalette3-3",r[2],t),l("enemy_topRightPalette3-4",r[3],t),l("enemy_topRightPalette3-5",r[4],t),l("enemy_topRightPalette3-6",r[5],t);break;case 5:l("enemy_topRightPalette4-1",r[0],t),l("enemy_topRightPalette4-2",r[0],t),l("enemy_topRightPalette4-3",r[1],t),l("enemy_topRightPalette4-4",r[2],t),l("enemy_topRightPalette4-5",r[3],t),l("enemy_topRightPalette4-6",r[4],t),l("enemy_topRightPalette4-7",r[5],t),l("enemy_topRightPalette4-8",r[6],t);break;case 6:l("enemy_topRightPalette4-1",r[0],t),l("enemy_topRightPalette4-2",r[1],t),l("enemy_topRightPalette4-3",r[2],t),l("enemy_topRightPalette4-4",r[3],t),l("enemy_topRightPalette4-5",r[4],t),l("enemy_topRightPalette4-6",r[5],t),l("enemy_topRightPalette4-7",r[6],t),l("enemy_topRightPalette4-8",r[6],t);break;case 7:l("enemy_topRightPalette4-1",r[0],t),l("enemy_topRightPalette4-2",r[1],t),l("enemy_topRightPalette4-3",r[2],t),l("enemy_topRightPalette4-4",r[3],t),l("enemy_topRightPalette4-5",r[4],t),l("enemy_topRightPalette4-6",r[5],t),l("enemy_topRightPalette4-7",r[6],t),l("enemy_topRightPalette4-8",r[7],t);break;case 8:l("enemy_topRightPalette5-1",r[0],t),l("enemy_topRightPalette5-2",r[1],t),l("enemy_topRightPalette5-3",r[2],t);break;case 9:l("enemy_topRightPalette0-1",r[0],t);break;case 10:l("enemy_topRightPalette3-1",r[0],t),l("enemy_topRightPalette3-1-1",r[0],t);break;case 11:l("enemy_topRightPalette0-1-1",r[0],t),l("enemy_topRightPalette0-1-2",r[1],t);break;case 12:l("enemy_topRightPalette0-1-1-1",r[0],t),l("enemy_topRightPalette0-1-2-1",r[1],t);break;case 13:l("enemy_topRightPalette6-1",r[0],t),l("enemy_topRightPalette6-2",r[1],t),l("enemy_topRightPalette6-3",r[2],t),l("enemy_topRightPalette6-4",r[3],t),l("enemy_topRightPalette6-5",r[4],t),l("enemy_topRightPalette6-6",r[5],t),l("enemy_topRightPalette6-7",r[6],t),l("enemy_topRightPalette6-8",r[7],t),l("enemy_topRightPalette6-9",r[8],t),l("enemy_topRightPalette6-10",r[9],t),l("enemy_topRightPalette6-11",r[10],t),l("enemy_topRightPalette6-12",r[11],t),l("enemy_topRightPalette6-13",r[12],t),l("enemy_topRightPalette6-14",r[13],t),l("enemy_topRightPalette6-15",r[14],t),l("enemy_topRightPalette6-16",r[15],t)}}catch{}})}console.log(C),($=C.alwaysOnTop||!1)?c("Top_Right_Palette_Order",b):b()}catch{}var T=e.GetValue("Top_Right","Gradient");switch(T){case 0:break;case 1:a("enemy_topRightGradient","Top_Right","Palette_Gradient");break;case 2:a("enemy_topRightGradient","Top_Right","Palette_Gradient"),a("enemy_topRightGradient2","Top_Right","Palette_Gradient_2");break;case 3:a("enemy_topRightGradient","Top_Right","Palette_Gradient"),a("enemy_topRightGradientStripes","Top_Right","Palette_Gradient_Stripes");break;case 4:a("enemy_topRightGradientStops","Top_Right","Palette_Gradient")}var P=e.GetValue("Top_Right","Colored_Boxes");switch(0!=P&&a("enemy_topRightColoredBoxBackground","Top_Right","Colored_Box_Background"),P){case 0:break;case 1:a("enemy_topRightColoredBox1","Top_Right","Colored_Box_1_Color"),a("enemy_topRightColoredBox2","Top_Right","Colored_Box_2_Color"),a("enemy_topRightColoredBox3","Top_Right","Colored_Box_3_Color"),a("enemy_topRightColoredBox4","Top_Right","Colored_Box_4_Color"),a("enemy_topRightColoredBox5","Top_Right","Colored_Box_5_Color"),a("enemy_topRightColoredBox6","Top_Right","Colored_Box_6_Color"),a("enemy_topRightColoredBox7","Top_Right","Colored_Box_7_Color"),a("enemy_topRightColoredBox8","Top_Right","Colored_Box_8_Color")}1==e.GetValue("Top_Right","Mini_Jump")&&(a("enemy_topRightSmallJump1","Top_Right","Inactive_Mini_Jump_Top"),a("enemy_topRightSmallJump2","Top_Right","Inactive_Mini_Jump_Side"),a("enemy_topRightSmallJump3","Top_Right","Active_Mini_Jump_Top"),a("enemy_topRightSmallJump4","Top_Right","Active_Mini_Jump_Side"));var k=e.GetValue("Top_Right","Rearranging_Cubes");switch(k){case 0:break;case 1:a("enemy_topRightCubeBackgroundTop","Top_Right","Rearranging_Cube_Top_Background_Color"),a("enemy_topRightCubeBackgroundBottom","Top_Right","Rearranging_Cube_Bottom_Background_Color"),a("enemy_topRightCubePatternTop","Top_Right","Rearranging_Cube_Top_Pattern_Color"),a("enemy_topRightCubePatternBottom","Top_Right","Rearranging_Cube_Top_Pattern_Color"),a("enemy_topRightCubeBorder","Top_Right","Rearranging_Cube_Border_Color");break;case 2:c("sunset_cubes",()=>{a("enemy_topRightSunsetCubeBackground"),a("enemy_topRightSunsetCubePattern","Top_Right","Sunset_Cubes_Pattern_Color")})}1==e.GetValue("Top_Right","Spinning_Rhombus_Face")&&(a("enemy_topRightRhombusFaceBackground","Top_Right","Spinning_Rhombus_Face_Background"),a("enemy_topRightRhombusFaceOverlay","Top_Right","Spinning_Rhombus_Face_Overlay"));var B=e.GetValue("Top_Right","Flip_Tile");switch(0!=B&&(a("enemy_topRightFlipTileSide","Top_Right","Flip_Tile_Side_Color"),a("enemy_topRightFlipTile-0-1","Top_Right","Inactive_Flip_Tile_Background"),a("enemy_topRightFlipTile-0-2","Top_Right","Active_Flip_Tile_Background")),B){case 0:break;case 1:a("enemy_topRightFlipTile-1-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-1-2","Top_Right","Active_Flip_Tile_Color_1");break;case 2:a("enemy_topRightFlipTile-2-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-2-2","Top_Right","Active_Flip_Tile_Color_1");break;case 3:a("enemy_topRightFlipTile-3-1-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-3-1-2","Top_Right","Inactive_Flip_Tile_Color_2"),a("enemy_topRightFlipTile-3-2-1","Top_Right","Active_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-3-2-2","Top_Right","Active_Flip_Tile_Color_2");break;case 4:a("enemy_topRightFlipTile-4-1-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-4-1-2","Top_Right","Inactive_Flip_Tile_Color_2"),a("enemy_topRightFlipTile-4-2-1","Top_Right","Active_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-4-2-2","Top_Right","Active_Flip_Tile_Color_2");break;case 5:a("enemy_topRightFlipTile-5-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-5-2","Top_Right","Active_Flip_Tile_Color_1");break;case 6:a("enemy_topRightFlipTile-6-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-6-2","Top_Right","Active_Flip_Tile_Color_1");break;case 7:a("enemy_topRightFlipTile-7-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-7-2","Top_Right","Active_Flip_Tile_Color_1");break;case 8:a("enemy_topRightFlipTile-8-1-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-8-1-2","Top_Right","Inactive_Flip_Tile_Color_2"),a("enemy_topRightFlipTile-8-2-1","Top_Right","Active_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-8-2-2","Top_Right","Active_Flip_Tile_Color_2");break;case 9:a("enemy_topRightFlipTile-9-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-9-2","Top_Right","Active_Flip_Tile_Color_1");break;case 10:a("enemy_topRightFlipTile-10-1-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-10-1-2","Top_Right","Inactive_Flip_Tile_Color_2"),a("enemy_topRightFlipTile-10-2-1","Top_Right","Active_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-10-2-2","Top_Right","Active_Flip_Tile_Color_2");break;case 11:a("enemy_topRightFlipTile-11-1-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-11-1-2","Top_Right","Inactive_Flip_Tile_Color_2"),a("enemy_topRightFlipTile-11-2-1","Top_Right","Active_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-11-2-2","Top_Right","Active_Flip_Tile_Color_2");break;case 12:a("enemy_topRightFlipTile-12-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-12-2","Top_Right","Active_Flip_Tile_Color_1");break;case 13:a("enemy_topRightFlipTile-13-1","Top_Right","Inactive_Flip_Tile_Color_1"),a("enemy_topRightFlipTile-13-2","Top_Right","Active_Flip_Tile_Color_1")}0!=e.GetValue("Top_Right","Powerups")&&(a("enemy_topRightPowerupsBase"),a("enemy_topRightPowerupsGradient","Top_Right","Powerup_Custom_Gradient"),a("enemy_topRightPowerupsDark","Top_Right","Powerup_Dark_Color"),a("enemy_topRightPowerupsLight","Top_Right","Powerup_Icon_Color"))}d("sunset_cubes"),a("enemy_riserBackground","Riser_Top","Background");var R=e.GetValue("Light_Color_Palette","Type"),S=e.GetValue("Light_Color_Palette","Super_Glow_Amount");switch(-1!=R&&(a("enemy_colorVibrantBackground1","Light_Color_Palette","Color_1_Background"),a("enemy_colorVibrantBackground2","Light_Color_Palette","Color_2_Background"),a("enemy_colorVibrantBackground2Addition","Light_Color_Palette","Color_2_Addition"),a("enemy_colorVibrantBackground3","Light_Color_Palette","Color_3_Background"),a("enemy_colorVibrantBackground4","Light_Color_Palette","Color_4_Background"),a("enemy_colorVibrantBackground5","Light_Color_Palette","Color_5_Background"),a("enemy_colorVibrantBackground6","Light_Color_Palette","Color_6_Background"),a("enemy_colorVibrantHexFill","Light_Color_Palette","Hexagon_Circle_Center")),R){case 0:a("enemy_colorVibrant1Border1","Light_Color_Palette","Color_1_Border"),a("enemy_colorVibrant1Border2","Light_Color_Palette","Color_2_Border"),a("enemy_colorVibrant1Border3","Light_Color_Palette","Color_3_Border"),a("enemy_colorVibrant1Border4","Light_Color_Palette","Color_4_Border"),a("enemy_colorVibrant1Border5","Light_Color_Palette","Color_5_Border"),a("enemy_colorVibrant1Border6","Light_Color_Palette","Color_6_Border");break;case 2:a("enemy_colorVibrant2Border1Glow","Light_Color_Palette","Color_1_Border",S),a("enemy_colorVibrant2Border2Glow","Light_Color_Palette","Color_2_Border",S),a("enemy_colorVibrant2Border3Glow","Light_Color_Palette","Color_3_Border",S),a("enemy_colorVibrant2Border4Glow","Light_Color_Palette","Color_4_Border",S),a("enemy_colorVibrant2Border5Glow","Light_Color_Palette","Color_5_Border",S),a("enemy_colorVibrant2Border6Glow","Light_Color_Palette","Color_6_Border",S),a("enemy_colorVibrant2Border1","Light_Color_Palette","Color_1_Border"),a("enemy_colorVibrant2Border2","Light_Color_Palette","Color_2_Border"),a("enemy_colorVibrant2Border3","Light_Color_Palette","Color_3_Border"),a("enemy_colorVibrant2Border4","Light_Color_Palette","Color_4_Border"),a("enemy_colorVibrant2Border5","Light_Color_Palette","Color_5_Border"),a("enemy_colorVibrant2Border6","Light_Color_Palette","Color_6_Border");break;case 1:a("enemy_colorVibrant2Border1","Light_Color_Palette","Color_1_Border"),a("enemy_colorVibrant2Border2","Light_Color_Palette","Color_2_Border"),a("enemy_colorVibrant2Border3","Light_Color_Palette","Color_3_Border"),a("enemy_colorVibrant2Border4","Light_Color_Palette","Color_4_Border"),a("enemy_colorVibrant2Border5","Light_Color_Palette","Color_5_Border"),a("enemy_colorVibrant2Border6","Light_Color_Palette","Color_6_Border")}var w=e.GetValue("Dark_Color_Palette","Type"),D=e.GetValue("Dark_Color_Palette","Super_Glow_Amount");switch(-1!=R&&(a("enemy_colorDullBackground1","Dark_Color_Palette","Color_1_Background"),a("enemy_colorDullBackground1Addition","Dark_Color_Palette","Color_1_Addition"),a("enemy_colorDullBackground2","Dark_Color_Palette","Color_2_Background"),a("enemy_colorDullBackground3","Dark_Color_Palette","Color_3_Background"),a("enemy_colorDullBackground4","Dark_Color_Palette","Color_4_Background"),a("enemy_colorDullBackground5","Dark_Color_Palette","Color_5_Background"),a("enemy_colorDullBackground6","Dark_Color_Palette","Color_6_Background"),a("enemy_colorDullBackground6Addition","Dark_Color_Palette","Color_6_Addition")),w){case 0:a("enemy_colorDull1Border1","Dark_Color_Palette","Color_1_Border"),a("enemy_colorDull1Border2","Dark_Color_Palette","Color_2_Border"),a("enemy_colorDull1Border3","Dark_Color_Palette","Color_3_Border"),a("enemy_colorDull1Border4","Dark_Color_Palette","Color_4_Border"),a("enemy_colorDull1Border5","Dark_Color_Palette","Color_5_Border"),a("enemy_colorDull1Border6","Dark_Color_Palette","Color_6_Border");break;case 2:a("enemy_colorDull2Border1Glow","Dark_Color_Palette","Color_1_Border",D),a("enemy_colorDull2Border2Glow","Dark_Color_Palette","Color_2_Border",D),a("enemy_colorDull2Border3Glow","Dark_Color_Palette","Color_3_Border",D),a("enemy_colorDull2Border4Glow","Dark_Color_Palette","Color_4_Border",D),a("enemy_colorDull2Border5Glow","Dark_Color_Palette","Color_5_Border",D),a("enemy_colorDull2Border6Glow","Dark_Color_Palette","Color_6_Border",D),a("enemy_colorDull2Border1","Dark_Color_Palette","Color_1_Border"),a("enemy_colorDull2Border2","Dark_Color_Palette","Color_2_Border"),a("enemy_colorDull2Border3","Dark_Color_Palette","Color_3_Border"),a("enemy_colorDull2Border4","Dark_Color_Palette","Color_4_Border"),a("enemy_colorDull2Border5","Dark_Color_Palette","Color_5_Border"),a("enemy_colorDull2Border6","Dark_Color_Palette","Color_6_Border");break;case 1:a("enemy_colorDull2Border1","Dark_Color_Palette","Color_1_Border"),a("enemy_colorDull2Border2","Dark_Color_Palette","Color_2_Border"),a("enemy_colorDull2Border3","Dark_Color_Palette","Color_3_Border"),a("enemy_colorDull2Border4","Dark_Color_Palette","Color_4_Border"),a("enemy_colorDull2Border5","Dark_Color_Palette","Color_5_Border"),a("enemy_colorDull2Border6","Dark_Color_Palette","Color_6_Border");break;case 3:c("Color_Dull_Extension",()=>{a("enemy_colorDullBackground7","Dark_Color_Palette","Color_7_Background"),a("enemy_colorDullBackground8","Dark_Color_Palette","Color_8_Background"),a("enemy_colorDullBackground9","Dark_Color_Palette","Color_9_Background"),a("enemy_colorDullBackground10","Dark_Color_Palette","Color_10_Background"),a("enemy_colorDullBackground11","Dark_Color_Palette","Color_11_Background"),a("enemy_colorDullBackground12","Dark_Color_Palette","Color_12_Background"),a("enemy_colorDull1Border1","Dark_Color_Palette","Color_1_Border"),a("enemy_colorDull1Border2","Dark_Color_Palette","Color_2_Border"),a("enemy_colorDull1Border3","Dark_Color_Palette","Color_3_Border"),a("enemy_colorDull1Border4","Dark_Color_Palette","Color_4_Border"),a("enemy_colorDull1Border5","Dark_Color_Palette","Color_5_Border"),a("enemy_colorDull1Border6","Dark_Color_Palette","Color_6_Border"),a("enemy_colorDull1Border7","Dark_Color_Palette","Color_7_Border"),a("enemy_colorDull1Border8","Dark_Color_Palette","Color_8_Border"),a("enemy_colorDull1Border9","Dark_Color_Palette","Color_9_Border"),a("enemy_colorDull1Border10","Dark_Color_Palette","Color_10_Border"),a("enemy_colorDull1Border11","Dark_Color_Palette","Color_11_Border"),a("enemy_colorDull1Border12","Dark_Color_Palette","Color_12_Border")})}var L=e.GetValue("Gradient","Type");switch(L){case 0:a("enemy_gradient1Lighten","Gradient","Lighten_Color"),a("enemy_gradient1Darken","Gradient","Darken_Color"),a("enemy_gradient1StripLighten","Gradient","Strip_Lighten_Color"),a("enemy_gradient1StripDarken","Gradient","Strip_Darken_Color"),a("enemy_gradient1BorderThick","Gradient","Border_Color");break;case 1:a("enemy_gradient2Lighten","Gradient","Lighten_Color"),a("enemy_gradient2Glow","Gradient","Glow_Color"),a("enemy_gradient2Darken","Gradient","Darken_Color"),a("enemy_gradient2StripLighten","Gradient","Strip_Lighten_Color"),a("enemy_gradient2StripDarken","Gradient","Strip_Darken_Color");break;case 2:a("enemy_gradient2Lighten","Gradient","Lighten_Color"),a("enemy_gradient1StripLighten","Gradient","Lighten_Color"),a("enemy_alternateStar","Gradient","Dynamic_Cube_Floater_Color")}var G=e.GetValue("Gradient","Decoration");switch(G){case 0:break;case 1:a("enemy_gradient1Decoration1","Gradient","Decoration_Color")}var A=e.GetValue("Riser_Top","Type");switch(A){case 0:a("enemy_riser1OuterBorderLeft","Riser_Top","Left_Outer_Border"),a("enemy_riser1InnerColorLeft","Riser_Top","Left_Inner_Color"),a("enemy_riser1InnerBorderLeft","Riser_Top","Left_Inner_Border"),a("enemy_riser1OuterBorderRight","Riser_Top","Right_Outer_Border"),a("enemy_riser1InnerColorRight","Riser_Top","Right_Inner_Color"),a("enemy_riser1InnerBorderRight","Riser_Top","Right_Inner_Border");break;case 1:a("enemy_riser2InnerColorLeft","Riser_Top","Left_Inner_Color"),a("enemy_riser2InnerColorRight","Riser_Top","Right_Inner_Color"),a("enemy_riser2OuterColorLeft","Riser_Top","Left_Inner_Border"),a("enemy_riser2OuterColorRight","Riser_Top","Right_Inner_Border");break;case 2:a("enemy_anniversaryPalette");break;case 3:var F=[256,384];a("enemy_bottomRight000","Riser_Top","Palette_1_Color",1,F),a("enemy_bottomRight001","Riser_Top","Palette_2_Color",1,F),a("enemy_bottomRight002","Riser_Top","Palette_3_Color",1,F),a("enemy_bottomRight003","Riser_Top","Palette_4_Color",1,F),a("enemy_bottomRight004","Riser_Top","Palette_5_Color",1,F),a("enemy_bottomRight005","Riser_Top","Palette_6_Color",1,F),a("enemy_bottomRight006","Riser_Top","Palette_7_Color",1,F),a("enemy_bottomRight007","Riser_Top","Palette_8_Color",1,F),a("enemy_bottomRight008","Riser_Top","Palette_9_Color",1,F),a("enemy_bottomRight009","Riser_Top","Palette_10_Color",1,F),a("enemy_bottomRight010","Riser_Top","Palette_11_Color",1,F),a("enemy_bottomRight011","Riser_Top","Palette_12_Color",1,F),a("enemy_bottomRight012","Riser_Top","Palette_13_Color",1,F),a("enemy_bottomRight013","Riser_Top","Palette_14_Color",1,F),a("enemy_bottomRight014","Riser_Top","Palette_15_Color",1,F),a("enemy_bottomRight015","Riser_Top","Palette_16_Color",1,F),a("enemy_bottomRight016","Riser_Top","Palette_17_Color",1,F),a("enemy_bottomRight017","Riser_Top","Palette_18_Color",1,F),a("enemy_bottomRight018","Riser_Top","Palette_19_Color",1,F),a("enemy_bottomRight019","Riser_Top","Palette_20_Color",1,F),a("enemy_bottomRight020","Riser_Top","Palette_21_Color",1,F),a("enemy_bottomRight021","Riser_Top","Palette_22_Color",1,F),a("enemy_bottomRight022","Riser_Top","Palette_23_Color",1,F),a("enemy_bottomRight023","Riser_Top","Palette_24_Color",1,F),a("enemy_bottomRight024","Riser_Top","Palette_25_Color",1,F)}d("Color_Dull_Extension"),d("Top_Right_Palette_Order"),d("Alternate_Stripes"),AssignHitboxes([[12,12,104,104,"Laser_Center",!0],[128,0,52,128,"Laser_Beam"],[192,0,320,128,"Top_Right"],[0,128,256,64,"Main_Stripe"],[256,128,256,64,"Alternate_Stripe"],[0,192,256,203,"Light_Color_Palette"],[256,192,256,192,"Dark_Color_Palette"],[0,395,256,117,"Gradient"],[256,384,256,128,"Riser_Top"]]);break;case 1:function M(){var t=e.GetValue("General","Border_Style");switch(t){case 0:a("general_mainBorder1","General","Border"),a("general_mainPalette1Shadow","Palette","Shadow"),a("general_mainPalette11","Palette","Square_1"),a("general_mainPalette11Overlay","Palette","Square_1_Overlay"),a("general_mainPalette12","Palette","Square_2"),a("general_mainPalette12Overlay","Palette","Square_2_Overlay"),a("general_mainPalette13","Palette","Square_3"),a("general_mainPalette14","Palette","Square_4"),a("general_mainPalette14Overlay","Palette","Square_4_Overlay"),a("general_mainPalette15","Palette","Square_5");break;case 1:a("general_mainBorder2Bottom","General","Lower_Border"),a("general_mainBorder2Top","General","Border"),a("general_mainPalette2Shadow","Palette","Shadow"),a("general_mainPalette21","Palette","Square_1"),a("general_mainPalette21Overlay","Palette","Square_1_Overlay"),a("general_mainPalette22","Palette","Square_2"),a("general_mainPalette22Overlay","Palette","Square_2_Overlay"),a("general_mainPalette23","Palette","Square_3"),a("general_mainPalette24","Palette","Square_4"),a("general_mainPalette24Overlay","Palette","Square_4_Overlay"),a("general_mainPalette25","Palette","Square_5");break;case 2:a("general_mainBorder3","General","Border"),a("general_mainPalette1Shadow","Palette","Shadow"),a("general_mainPalette11","Palette","Square_1"),a("general_mainPalette11Overlay","Palette","Square_1_Overlay"),a("general_mainPalette12","Palette","Square_2"),a("general_mainPalette12Overlay","Palette","Square_2_Overlay"),a("general_mainPalette13","Palette","Square_3"),a("general_mainPalette14","Palette","Square_4"),a("general_mainPalette14Overlay","Palette","Square_4_Overlay"),a("general_mainPalette15","Palette","Square_5");break;case 3:a("general_mainBorder4","General","Border"),a("general_mainPalette1Shadow","Palette","Shadow"),a("general_mainPalette11","Palette","Square_1"),a("general_mainPalette11Overlay","Palette","Square_1_Overlay"),a("general_mainPalette12","Palette","Square_2"),a("general_mainPalette12Overlay","Palette","Square_2_Overlay"),a("general_mainPalette13","Palette","Square_3"),a("general_mainPalette14","Palette","Square_4"),a("general_mainPalette14Overlay","Palette","Square_4_Overlay"),a("general_mainPalette15","Palette","Square_5");break;case 4:a("general_mainBorder5Bottom","General","Lower_Border"),a("general_mainBorder5Top","General","Border"),a("general_mainPalette2Shadow","Palette","Shadow"),a("general_mainPalette21","Palette","Square_1"),a("general_mainPalette21Overlay","Palette","Square_1_Overlay"),a("general_mainPalette22","Palette","Square_2"),a("general_mainPalette22Overlay","Palette","Square_2_Overlay"),a("general_mainPalette23","Palette","Square_3"),a("general_mainPalette24","Palette","Square_4"),a("general_mainPalette24Overlay","Palette","Square_4_Overlay"),a("general_mainPalette25","Palette","Square_5");break;case 5:a("general_mainBorder6Bottom","General","Lower_Border"),a("general_mainBorder6Top","General","Border"),a("general_mainPalette2Shadow","Palette","Shadow"),a("general_mainPalette21","Palette","Square_1"),a("general_mainPalette21Overlay","Palette","Square_1_Overlay"),a("general_mainPalette22","Palette","Square_2"),a("general_mainPalette22Overlay","Palette","Square_2_Overlay"),a("general_mainPalette23","Palette","Square_3"),a("general_mainPalette24","Palette","Square_4"),a("general_mainPalette24Overlay","Palette","Square_4_Overlay"),a("general_mainPalette25","Palette","Square_5");break;case 6:a("general_mainBorder8","General","Lower_Border"),a("general_mainBorder1","General","Border"),a("general_mainPalette1Shadow","Palette","Shadow"),a("general_mainPalette11","Palette","Square_1"),a("general_mainPalette11Overlay","Palette","Square_1_Overlay"),a("general_mainPalette12","Palette","Square_2"),a("general_mainPalette12Overlay","Palette","Square_2_Overlay"),a("general_mainPalette13","Palette","Square_3"),a("general_mainPalette14","Palette","Square_4"),a("general_mainPalette14Overlay","Palette","Square_4_Overlay"),a("general_mainPalette15","Palette","Square_5")}}p("General","Background");var x=e.GetValue("Top_Left","Type");switch(x){case 0:var O=e.GetValue("Top_Left","Active_Jump_Pad_Style");switch(O){case 0:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad1ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 1:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad2ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 2:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad3ActiveDecoration","Top_Left","Active_Jump_Pad_Decoration_1"),a("general_jumpPad1ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 3:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad4ActiveDecorationCenter","Top_Left","Active_Jump_Pad_Decoration_2"),a("general_jumpPad4ActiveDecoration","Top_Left","Active_Jump_Pad_Decoration_1"),a("general_jumpPad4ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 4:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad5ActiveDecoration","Top_Left","Active_Jump_Pad_Decoration_1"),a("general_jumpPad1ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 5:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad6ActiveDecoration","Top_Left","Active_Jump_Pad_Decoration_1"),a("general_jumpPad1ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 6:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad7ActiveDecoration","Top_Left","Active_Jump_Pad_Decoration_1"),a("general_jumpPad1ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 7:a("general_jumpPad8ActiveColor"),a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Decoration_3"),a("general_jumpPad1ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side");break;case 8:a("general_jumpPad1ActiveColor","Top_Left","Active_Jump_Pad_Color"),a("general_jumpPad9ActiveDecoration","Top_Left","Active_Jump_Pad_Decoration_1"),a("general_jumpPad1ActiveBorder","Top_Left","Active_Jump_Pad_Border"),a("general_jumpPad1ActivePalette","Top_Left","Active_Jump_Pad_Side")}var I=e.GetValue("Top_Left","Inactive_Jump_Pad_Style");switch(I){case 0:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad1Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 1:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad2Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 2:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad3Decoration","Top_Left","Inactive_Jump_Pad_Decoration_1"),a("general_jumpPad1Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 3:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad4DecorationCenter","Top_Left","Inactive_Jump_Pad_Decoration_2"),a("general_jumpPad4Decoration","Top_Left","Inactive_Jump_Pad_Decoration_1"),a("general_jumpPad4Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 4:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad5Decoration","Top_Left","Inactive_Jump_Pad_Decoration_1"),a("general_jumpPad1Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 5:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad6Decoration","Top_Left","Inactive_Jump_Pad_Decoration_1"),a("general_jumpPad1Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 6:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad7Decoration","Top_Left","Inactive_Jump_Pad_Decoration_1"),a("general_jumpPad1Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 7:a("general_jumpPad8Color"),a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Decoration_3"),a("general_jumpPad1Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side");break;case 8:a("general_jumpPad1Color","Top_Left","Inactive_Jump_Pad_Color"),a("general_jumpPad9Decoration","Top_Left","Inactive_Jump_Pad_Decoration_1"),a("general_jumpPad1Border","Top_Left","Inactive_Jump_Pad_Border"),a("general_jumpPad1Palette","Top_Left","Inactive_Jump_Pad_Side")}M();var j=e.GetValue("General","Decoration_Type");switch(j){case 0:break;case 1:a("general_decoration1","General","Decoration_Color_1");break;case 2:a("general_decoration2","General","Decoration_Color_1"),a("general_decoration2Outline","General","Decoration_Color_2");break;case 3:a("general_mainBorder7Decoration1","General","Decoration_Color_1"),a("general_mainBorder7Decoration2","General","Decoration_Color_2"),a("general_mainBorder7Decoration3","General","Decoration_Color_3"),a("general_mainBorder7Decoration4","General","Border")}break;case 1:M(),a("mover_ArrowActiveColor","Top_Left","Active_Mover_Arrow_Color"),a("mover_ArrowActiveInnerColor","Top_Left","Active_Mover_Arrow_Inner_Color"),a("mover_ArrowActiveBorder","Top_Left","Active_Mover_Arrow_Border"),a("mover_ArrowActivePalette","Top_Left","Active_Mover_Arrow_Side"),a("mover_ArrowInactiveColor","Top_Left","Inactive_Mover_Arrow_Color"),a("mover_ArrowInactiveInnerColor","Top_Left","Inactive_Mover_Arrow_Inner_Color"),a("mover_ArrowInactiveBorder","Top_Left","Inactive_Mover_Arrow_Border"),a("mover_ArrowInactivePalette","Top_Left","Inactive_Mover_Arrow_Side"),a("mover_BorderStyle1","Top_Left","Mover_Border_Outline")}AssignHitboxes([[0,0,341,171,"Top_Left"],[341,0,171,171,"General"],[0,171,171,171,"General"],[171,171,171,171,"Palette"],[341,171,171,171,"General"],[0,341,171,171,"General"],[171,341,171,171,"General"],[341,341,171,171,"General"]]);break;case 2:p("Fragile","Background"),context.clearRect(0,0,341,171);var x=e.GetValue("Top_Left","Type");switch(x){case 0:a("fragile_topLeftLQGemColor","Top_Left","Low_Quality_Gem_Color"),a("fragile_topLeftLQGemOutline","Top_Left","Low_Quality_Gem_Outline"),a("fragile_topLeftMidgroundLighten","Top_Left","Midground_Gradient_Top"),a("fragile_topLeftMidgroundDarken","Top_Left","Midground_Gradient_Bottom"),e.GetValue("Top_Left","Midground_Decoration");break;case 1:a("fragileActive_checkerBottom1","Top_Left","Bottom_Checker_1"),a("fragileActive_checkerBottom2","Top_Left","Bottom_Checker_2"),a("fragileActive_checkerTop1","Top_Left","Top_Checker_1"),a("fragileActive_checkerTop2","Top_Left","Top_Checker_2");var V=e.GetValue("Top_Left","Highscore_Style");switch(V){case 0:a("fragileActive_highscoreTop1Outline","Top_Left","Top_Highscore_Outline"),a("fragileActive_highscoreTop1","Top_Left","Top_Highscore_Color"),a("fragileActive_highscoreBottom1","Top_Left","Bottom_Highscore_Color");break;case 1:a("fragileActive_highscoreTop2","Top_Left","Top_Highscore_Color"),a("fragileActive_highscoreBottom2","Top_Left","Bottom_Highscore_Color");break;case 2:a("fragileActive_highscoreTop2","Top_Left","Top_Highscore_Color"),a("fragileActive_highscoreBottom3","Top_Left","Bottom_Highscore_Color")}}var E=e.GetValue("Fragile","Border_Style");switch(E){case 0:a("fragile_border1","Fragile","Border"),a("fragile_border1Outline","Fragile","Border"),a("fragile_border1Stripe","Fragile","Stripes");break;case 1:a("fragile_border1","Fragile","Border"),a("fragile_border2Outline","Fragile","Border"),a("fragile_border2Stripe","Fragile","Stripes");break;case 2:a("fragile_border2","Fragile","Border");break;case 6:a("fragile_border4","Fragile","Border");break;case 3:a("fragile_border2","Fragile","Border"),a("fragile_border1Stripe","Fragile","Stripes");break;case 4:a("fragile_border1","Fragile","Border");break;case 5:a("fragile_border3","Fragile","Border"),a("fragile_border3Abstract","Fragile","Border")}var j=e.GetValue("Fragile","Decoration_Type");switch(j){case 0:break;case 1:a("fragile_decoration1","Fragile","Border");break;case 2:a("fragile_decoration2","Fragile","Border")}a("general_mainPalette1Shadow","Palette","Shadow"),a("general_mainPalette11","Palette","Square_1"),a("general_mainPalette11Overlay","Palette","Square_1_Overlay"),a("general_mainPalette12","Palette","Square_2"),a("general_mainPalette12Overlay","Palette","Square_2_Overlay"),a("general_mainPalette13","Palette","Square_3"),a("general_mainPalette14","Palette","Square_4"),a("general_mainPalette14Overlay","Palette","Square_4_Overlay"),a("general_mainPalette15","Palette","Square_5"),AssignHitboxes([[0,0,341,171,"Top_Left"],[341,0,171,171,"Fragile"],[0,171,171,171,"Fragile"],[171,171,171,171,"Palette"],[341,171,171,171,"Fragile"],[0,341,171,171,"Fragile"],[171,341,171,171,"Fragile"],[341,341,171,171,"Fragile"]])}o(window.f)}},Initialize(){var e=navigator.deviceMemory,t=60;void 0!=e&&(t=Math.round((e-8+10)*1.75)+40),window.vcache=new VariableCache(t),window.sprite=new Spritesheet(cachedSpriteData[0])}},themelink=document.querySelector("#themelink"),themeselect=document.querySelector("#themeselect");const Theme={ThemeName:{"Classic Dark":"classic_dark","Classic Light":"classic_light","Synthwave Sunset":"synthwave_sunset","Deep Sea":"deep_sea"},IsValidTheme:e=>-1!=Object.values(Theme.ThemeName).indexOf(e),Activate(e){Theme.IsValidTheme(e)?(localStorage.setItem("activeTheme",e),themelink.href="themes/"+e+".css"):(localStorage.setItem("activeTheme","classic_dark"),themelink.href="themes/classic_dark.css")}};var themeselecthtml="";Object.keys(Theme.ThemeName).forEach(e=>{themeselecthtml+='<option value="'+Theme.ThemeName[e]+'">'+e+"</option>"}),themeselect.innerHTML=themeselecthtml;var lastactivetheme=localStorage.getItem("activeTheme");function changetheme(){Theme.Activate(themeselect.value)}Theme.IsValidTheme(lastactivetheme)?themeselect.value=lastactivetheme:themeselect.value="classic_dark",changetheme();const ImageSources={enemy_laserCenter:"enemy/laser_center_color",enemy_laserCenterBorder:"enemy/laser_center_border",enemy_laserCenterBackground:"enemy/laser_center_background",enemy_laserBeam:"enemy/laser_beam_color",enemy_laserBeamBorder:"enemy/laser_beam_border",enemy_laserBeamBackground:"enemy/laser_beam_background",enemy_laserBeam1:"enemy/laser_beam_1_color",enemy_laserBeam1Background:"enemy/laser_beam_1_background",enemy_laserBeam2:"enemy/laser_beam_2_color",enemy_laserBeam2Background:"enemy/laser_beam_2_background",enemy_laserBeam3:"enemy/laser_beam_3_color",enemy_laserBeam3Background:"enemy/laser_beam_3_background",enemy_laserBeam4:"enemy/laser_beam_4_color",enemy_laserBeam4Background:"enemy/laser_beam_4_background",enemy_topRightBackground:"enemy/top_right_background",enemy_topRightBackgroundWide:"enemy/top_right_background_wide",enemy_topRightStarColor_l:"enemy/top_right_star_color_l",enemy_topRightStarColor_r:"enemy/top_right_star_color_r",enemy_topRightStarShadow_l:"enemy/top_right_star_shadow_l",enemy_topRightStarShadow_r:"enemy/top_right_star_shadow_r",enemy_topRightFlipTileSide:"enemy/topright/flip_tile_side","enemy_topRightFlipTile-0-1":"enemy/topright/flip_tile_0_1","enemy_topRightFlipTile-0-2":"enemy/topright/flip_tile_0_2","enemy_topRightFlipTile-1-1":"enemy/topright/flip_tile_1_1","enemy_topRightFlipTile-1-2":"enemy/topright/flip_tile_1_2","enemy_topRightFlipTile-2-1":"enemy/topright/flip_tile_2_1","enemy_topRightFlipTile-2-2":"enemy/topright/flip_tile_2_2","enemy_topRightFlipTile-3-1-1":"enemy/topright/flip_tile_3_1_1","enemy_topRightFlipTile-3-1-2":"enemy/topright/flip_tile_3_1_2","enemy_topRightFlipTile-3-2-1":"enemy/topright/flip_tile_3_2_1","enemy_topRightFlipTile-3-2-2":"enemy/topright/flip_tile_3_2_2","enemy_topRightFlipTile-4-1-1":"enemy/topright/flip_tile_4_1_1","enemy_topRightFlipTile-4-1-2":"enemy/topright/flip_tile_4_1_2","enemy_topRightFlipTile-4-2-1":"enemy/topright/flip_tile_4_2_1","enemy_topRightFlipTile-4-2-2":"enemy/topright/flip_tile_4_2_2","enemy_topRightFlipTile-5-1":"enemy/topright/flip_tile_5_1","enemy_topRightFlipTile-5-2":"enemy/topright/flip_tile_5_2","enemy_topRightFlipTile-6-1":"enemy/topright/flip_tile_6_1","enemy_topRightFlipTile-6-2":"enemy/topright/flip_tile_6_2","enemy_topRightFlipTile-7-1":"enemy/topright/flip_tile_7_1","enemy_topRightFlipTile-7-2":"enemy/topright/flip_tile_7_2","enemy_topRightFlipTile-8-1-1":"enemy/topright/flip_tile_8_1_1","enemy_topRightFlipTile-8-1-2":"enemy/topright/flip_tile_8_1_2","enemy_topRightFlipTile-8-2-1":"enemy/topright/flip_tile_8_2_1","enemy_topRightFlipTile-8-2-2":"enemy/topright/flip_tile_8_2_2","enemy_topRightFlipTile-9-1":"enemy/topright/flip_tile_9_1","enemy_topRightFlipTile-9-2":"enemy/topright/flip_tile_9_2","enemy_topRightFlipTile-10-1-1":"enemy/topright/flip_tile_10_1_1","enemy_topRightFlipTile-10-1-2":"enemy/topright/flip_tile_10_1_2","enemy_topRightFlipTile-10-2-1":"enemy/topright/flip_tile_10_2_1","enemy_topRightFlipTile-10-2-2":"enemy/topright/flip_tile_10_2_2","enemy_topRightFlipTile-11-1-1":"enemy/topright/flip_tile_11_1_1","enemy_topRightFlipTile-11-1-2":"enemy/topright/flip_tile_11_1_2","enemy_topRightFlipTile-11-2-1":"enemy/topright/flip_tile_11_2_1","enemy_topRightFlipTile-11-2-2":"enemy/topright/flip_tile_11_2_2","enemy_topRightFlipTile-12-1":"enemy/topright/flip_tile_12_1","enemy_topRightFlipTile-12-2":"enemy/topright/flip_tile_12_2","enemy_topRightFlipTile-13-1":"enemy/topright/flip_tile_13_1","enemy_topRightFlipTile-13-2":"enemy/topright/flip_tile_13_2",enemy_topRightBackgroundPalette:"enemy/topright/basic_palette",enemy_topRightGradient:"enemy/topright/gradient",enemy_topRightGradient2:"enemy/topright/gradient_2",enemy_topRightGradientStripes:"enemy/topright/gradient_stripes",enemy_topRightGradientStops:"enemy/topright/gradient_stops",enemy_topRightPowerupsBase:"enemy/topright/powerups_base",enemy_topRightPowerupsDark:"enemy/topright/powerups_color_dark",enemy_topRightPowerupsLight:"enemy/topright/powerups_color_light",enemy_topRightPowerupsGradient:"enemy/topright/powerups_gradient",enemy_topRightCubeBackgroundTop:"enemy/topright/cube_top_background",enemy_topRightCubeBackgroundBottom:"enemy/topright/cube_bottom_background",enemy_topRightCubePatternTop:"enemy/topright/cube_top_pattern",enemy_topRightCubePatternBottom:"enemy/topright/cube_bottom_pattern",enemy_topRightCubeBorder:"enemy/topright/cube_border",enemy_topRightRhombusFaceOverlay:"enemy/topright/rhombus_face_overlay",enemy_topRightRhombusFaceBackground:"enemy/topright/rhombus_face_background",enemy_topRightSunsetCubePattern:"enemy/topright/sunset_cube_color",enemy_topRightSunsetCubeBackground:"enemy/topright/sunset_cube_background",enemy_topRightSmallJump1:"enemy/topright/small_jump_1",enemy_topRightSmallJump2:"enemy/topright/small_jump_2",enemy_topRightSmallJump3:"enemy/topright/small_jump_3",enemy_topRightSmallJump4:"enemy/topright/small_jump_4",enemy_topRightColoredBox1:"enemy/topright/colored_box_1",enemy_topRightColoredBox2:"enemy/topright/colored_box_2",enemy_topRightColoredBox3:"enemy/topright/colored_box_3",enemy_topRightColoredBox4:"enemy/topright/colored_box_4",enemy_topRightColoredBox5:"enemy/topright/colored_box_5",enemy_topRightColoredBox6:"enemy/topright/colored_box_6",enemy_topRightColoredBox7:"enemy/topright/colored_box_7",enemy_topRightColoredBox8:"enemy/topright/colored_box_8",enemy_topRightColoredBoxBackground:"enemy/topright/colored_box_background",enemy_topRightPalette0:"enemy/topright/palettes/0","enemy_topRightPalette0-1":"enemy/topright/palettes/0-1","enemy_topRightPalette0-1-1":"enemy/topright/palettes/0-1-1","enemy_topRightPalette0-1-2":"enemy/topright/palettes/0-1-2","enemy_topRightPalette0-1-1-1":"enemy/topright/palettes/0-1-1-1","enemy_topRightPalette0-1-2-1":"enemy/topright/palettes/0-1-2-1","enemy_topRightPalette1-1":"enemy/topright/palettes/1-1","enemy_topRightPalette1-2":"enemy/topright/palettes/1-2","enemy_topRightPalette1-3":"enemy/topright/palettes/1-3","enemy_topRightPalette1-4":"enemy/topright/palettes/1-4","enemy_topRightPalette2-1":"enemy/topright/palettes/2-1","enemy_topRightPalette2-2":"enemy/topright/palettes/2-2","enemy_topRightPalette2-3":"enemy/topright/palettes/2-3","enemy_topRightPalette2-4":"enemy/topright/palettes/2-4","enemy_topRightPalette2-5":"enemy/topright/palettes/2-5","enemy_topRightPalette2-6":"enemy/topright/palettes/2-6","enemy_topRightPalette3-1":"enemy/topright/palettes/3-1","enemy_topRightPalette3-1-1":"enemy/topright/palettes/3-1-1","enemy_topRightPalette3-2":"enemy/topright/palettes/3-2","enemy_topRightPalette3-3":"enemy/topright/palettes/3-3","enemy_topRightPalette3-4":"enemy/topright/palettes/3-4","enemy_topRightPalette3-5":"enemy/topright/palettes/3-5","enemy_topRightPalette3-6":"enemy/topright/palettes/3-6","enemy_topRightPalette4-1":"enemy/topright/palettes/4-1","enemy_topRightPalette4-2":"enemy/topright/palettes/4-2","enemy_topRightPalette4-3":"enemy/topright/palettes/4-3","enemy_topRightPalette4-4":"enemy/topright/palettes/4-4","enemy_topRightPalette4-5":"enemy/topright/palettes/4-5","enemy_topRightPalette4-6":"enemy/topright/palettes/4-6","enemy_topRightPalette4-7":"enemy/topright/palettes/4-7","enemy_topRightPalette4-8":"enemy/topright/palettes/4-8","enemy_topRightPalette5-1":"enemy/topright/palettes/5-1","enemy_topRightPalette5-2":"enemy/topright/palettes/5-2","enemy_topRightPalette5-3":"enemy/topright/palettes/5-3","enemy_topRightPalette6-1":"enemy/topright/palettes/6-1","enemy_topRightPalette6-2":"enemy/topright/palettes/6-2","enemy_topRightPalette6-3":"enemy/topright/palettes/6-3","enemy_topRightPalette6-4":"enemy/topright/palettes/6-4","enemy_topRightPalette6-5":"enemy/topright/palettes/6-5","enemy_topRightPalette6-6":"enemy/topright/palettes/6-6","enemy_topRightPalette6-7":"enemy/topright/palettes/6-7","enemy_topRightPalette6-8":"enemy/topright/palettes/6-8","enemy_topRightPalette6-9":"enemy/topright/palettes/6-9","enemy_topRightPalette6-10":"enemy/topright/palettes/6-10","enemy_topRightPalette6-11":"enemy/topright/palettes/6-11","enemy_topRightPalette6-12":"enemy/topright/palettes/6-12","enemy_topRightPalette6-13":"enemy/topright/palettes/6-13","enemy_topRightPalette6-14":"enemy/topright/palettes/6-14","enemy_topRightPalette6-15":"enemy/topright/palettes/6-15","enemy_topRightPalette6-16":"enemy/topright/palettes/6-16",enemy_bottomRight000:"enemy/bottomright/000",enemy_bottomRight001:"enemy/bottomright/001",enemy_bottomRight002:"enemy/bottomright/002",enemy_bottomRight003:"enemy/bottomright/003",enemy_bottomRight004:"enemy/bottomright/004",enemy_bottomRight005:"enemy/bottomright/005",enemy_bottomRight006:"enemy/bottomright/006",enemy_bottomRight007:"enemy/bottomright/007",enemy_bottomRight008:"enemy/bottomright/008",enemy_bottomRight009:"enemy/bottomright/009",enemy_bottomRight010:"enemy/bottomright/010",enemy_bottomRight011:"enemy/bottomright/011",enemy_bottomRight012:"enemy/bottomright/012",enemy_bottomRight013:"enemy/bottomright/013",enemy_bottomRight014:"enemy/bottomright/014",enemy_bottomRight015:"enemy/bottomright/015",enemy_bottomRight016:"enemy/bottomright/016",enemy_bottomRight017:"enemy/bottomright/017",enemy_bottomRight018:"enemy/bottomright/018",enemy_bottomRight019:"enemy/bottomright/019",enemy_bottomRight020:"enemy/bottomright/020",enemy_bottomRight021:"enemy/bottomright/021",enemy_bottomRight022:"enemy/bottomright/022",enemy_bottomRight023:"enemy/bottomright/023",enemy_bottomRight024:"enemy/bottomright/024",enemy_stripeDefaultShadowLeft:"enemy/stripe_default_shadow_left",enemy_stripeDefaultColorLeft:"enemy/stripe_default_color_left",enemy_stripeDefaultShadowRight:"enemy/stripe_default_shadow_right",enemy_stripeDefaultColorRight:"enemy/stripe_default_color_right",enemy_stripeSplitShadowLeft:"enemy/stripe_split_shadow_left",enemy_stripeSplitColorLeft:"enemy/stripe_split_color_left",enemy_stripeSplitShadowRight:"enemy/stripe_split_shadow_right",enemy_stripeSplitColorRight:"enemy/stripe_split_color_right",enemy_stripeWideShadowLeft:"enemy/stripe_wide_shadow_left",enemy_stripeWideColorLeft:"enemy/stripe_wide_color_left",enemy_stripeWideShadowRight:"enemy/stripe_wide_shadow_right",enemy_stripeWideColorRight:"enemy/stripe_wide_color_right",enemy_stripeBackgroundLeft:"enemy/stripe_background_left",enemy_stripeBackgroundRight:"enemy/stripe_background_right",enemy_stripeIgniteColorLeft:"enemy/stripe_ignite_color_left","enemy_stripeRight1-1":"enemy/stripe_right_1_1","enemy_stripeRight1-2":"enemy/stripe_right_1_2","enemy_stripeRight1-3":"enemy/stripe_right_1_3","enemy_stripeRight1-4":"enemy/stripe_right_1_4","enemy_stripeRight2-1":"enemy/stripe_right_2_1","enemy_stripeRight2-2":"enemy/stripe_right_2_2","enemy_stripeRight2-3":"enemy/stripe_right_2_3","enemy_stripeRight2-3-1":"enemy/stripe_right_2_3_1",enemy_stripeRight3:"enemy/stripe_right_3",enemy_colorVibrantBackground1:"enemy/color_vibrant_background_1",enemy_colorVibrantBackground2:"enemy/color_vibrant_background_2",enemy_colorVibrantBackground2Addition:"enemy/color_vibrant_background_2_addition",enemy_colorVibrantBackground3:"enemy/color_vibrant_background_3",enemy_colorVibrantBackground4:"enemy/color_vibrant_background_4",enemy_colorVibrantBackground5:"enemy/color_vibrant_background_5",enemy_colorVibrantBackground6:"enemy/color_vibrant_background_6",enemy_colorVibrantHexFill:"enemy/color_vibrant_hex_fill",enemy_colorDullBackground1:"enemy/color_dull_background_1",enemy_colorDullBackground1Addition:"enemy/color_dull_background_1_addition",enemy_colorDullBackground2:"enemy/color_dull_background_2",enemy_colorDullBackground3:"enemy/color_dull_background_3",enemy_colorDullBackground4:"enemy/color_dull_background_4",enemy_colorDullBackground5:"enemy/color_dull_background_5",enemy_colorDullBackground6Addition:"enemy/color_dull_background_6_addition",enemy_colorDullBackground6:"enemy/color_dull_background_6",enemy_colorDullBackground7:"enemy/color_dull_background_7",enemy_colorDullBackground8:"enemy/color_dull_background_8",enemy_colorDullBackground9:"enemy/color_dull_background_9",enemy_colorDullBackground10:"enemy/color_dull_background_10",enemy_colorDullBackground11:"enemy/color_dull_background_11",enemy_colorDullBackground12:"enemy/color_dull_background_12",enemy_colorVibrant1Border1:"enemy/color_vibrant_1_border_1",enemy_colorVibrant1Border2:"enemy/color_vibrant_1_border_2",enemy_colorVibrant1Border3:"enemy/color_vibrant_1_border_3",enemy_colorVibrant1Border4:"enemy/color_vibrant_1_border_4",enemy_colorVibrant1Border5:"enemy/color_vibrant_1_border_5",enemy_colorVibrant1Border6:"enemy/color_vibrant_1_border_6",enemy_colorDull1Border1:"enemy/color_dull_1_border_1",enemy_colorDull1Border2:"enemy/color_dull_1_border_2",enemy_colorDull1Border3:"enemy/color_dull_1_border_3",enemy_colorDull1Border4:"enemy/color_dull_1_border_4",enemy_colorDull1Border5:"enemy/color_dull_1_border_5",enemy_colorDull1Border6:"enemy/color_dull_1_border_6",enemy_colorDull1Border7:"enemy/color_dull_1_border_7",enemy_colorDull1Border8:"enemy/color_dull_1_border_8",enemy_colorDull1Border9:"enemy/color_dull_1_border_9",enemy_colorDull1Border10:"enemy/color_dull_1_border_10",enemy_colorDull1Border11:"enemy/color_dull_1_border_11",enemy_colorDull1Border12:"enemy/color_dull_1_border_12",enemy_colorVibrant2Border1:"enemy/color_vibrant_2_border_1",enemy_colorVibrant2Border2:"enemy/color_vibrant_2_border_2",enemy_colorVibrant2Border3:"enemy/color_vibrant_2_border_3",enemy_colorVibrant2Border4:"enemy/color_vibrant_2_border_4",enemy_colorVibrant2Border5:"enemy/color_vibrant_2_border_5",enemy_colorVibrant2Border6:"enemy/color_vibrant_2_border_6",enemy_colorVibrant2Border1Glow:"enemy/color_vibrant_2_border_1_glow",enemy_colorVibrant2Border2Glow:"enemy/color_vibrant_2_border_2_glow",enemy_colorVibrant2Border3Glow:"enemy/color_vibrant_2_border_3_glow",enemy_colorVibrant2Border4Glow:"enemy/color_vibrant_2_border_4_glow",enemy_colorVibrant2Border5Glow:"enemy/color_vibrant_2_border_5_glow",enemy_colorVibrant2Border6Glow:"enemy/color_vibrant_2_border_6_glow",enemy_colorDull2Border1:"enemy/color_dull_2_border_1",enemy_colorDull2Border2:"enemy/color_dull_2_border_2",enemy_colorDull2Border3:"enemy/color_dull_2_border_3",enemy_colorDull2Border4:"enemy/color_dull_2_border_4",enemy_colorDull2Border5:"enemy/color_dull_2_border_5",enemy_colorDull2Border6:"enemy/color_dull_2_border_6",enemy_colorDull2Border1Glow:"enemy/color_dull_2_border_1_glow",enemy_colorDull2Border2Glow:"enemy/color_dull_2_border_2_glow",enemy_colorDull2Border3Glow:"enemy/color_dull_2_border_3_glow",enemy_colorDull2Border4Glow:"enemy/color_dull_2_border_4_glow",enemy_colorDull2Border5Glow:"enemy/color_dull_2_border_5_glow",enemy_colorDull2Border6Glow:"enemy/color_dull_2_border_6_glow",enemy_gradient1BorderThick:"enemy/gradient_1_border_thick",enemy_gradient1BorderThin:"enemy/gradient_1_border_thin",enemy_gradient1Darken:"enemy/gradient_1_darken",enemy_gradient1Lighten:"enemy/gradient_1_lighten",enemy_gradient1StripDarken:"enemy/gradient_1_strip_darken",enemy_gradient1StripLighten:"enemy/gradient_1_strip_lighten",enemy_gradient1Decoration1:"enemy/gradient_1_decoration_1",enemy_gradient2Darken:"enemy/gradient_2_darken",enemy_gradient2Lighten:"enemy/gradient_2_lighten",enemy_gradient2Glow:"enemy/gradient_2_glow",enemy_gradient2StripDarken:"enemy/gradient_2_strip_darken",enemy_gradient2StripLighten:"enemy/gradient_2_strip_lighten",enemy_riserBackground:"enemy/riser_background",enemy_riser1InnerColorLeft:"enemy/riser_1_inner_color_left",enemy_riser1InnerColorRight:"enemy/riser_1_inner_color_right",enemy_riser1InnerBorderLeft:"enemy/riser_1_inner_border_left",enemy_riser1InnerBorderRight:"enemy/riser_1_inner_border_right",enemy_riser1OuterBorderLeft:"enemy/riser_1_outer_border_left",enemy_riser1OuterBorderRight:"enemy/riser_1_outer_border_right",enemy_riser2InnerColorLeft:"enemy/riser_2_inner_color_left",enemy_riser2InnerColorRight:"enemy/riser_2_inner_color_right",enemy_riser2OuterColorLeft:"enemy/riser_2_outer_color_left",enemy_riser2OuterColorRight:"enemy/riser_2_outer_color_right",enemy_alternateStar:"enemy/alternate_star",enemy_anniversaryPalette:"enemy/anniversary_palette",enemy_bottomRightBrain:"enemy/bottom_right_brain",general_jumpPad1ActiveBorder:"general/jump_pad_1_active_border",general_jumpPad1ActiveColor:"general/jump_pad_1_active_color",general_jumpPad1ActivePalette:"general/jump_pad_1_active_palette",general_jumpPad2ActiveBorder:"general/jump_pad_2_active_border",general_jumpPad3ActiveDecoration:"general/jump_pad_3_active_decoration",general_jumpPad4ActiveBorder:"general/jump_pad_4_active_border",general_jumpPad4ActiveDecoration:"general/jump_pad_4_active_decoration",general_jumpPad4ActiveDecorationCenter:"general/jump_pad_4_active_decoration_center",general_jumpPad5ActiveDecoration:"general/jump_pad_5_active_decoration",general_jumpPad6ActiveDecoration:"general/jump_pad_6_active_decoration",general_jumpPad7ActiveDecoration:"general/jump_pad_7_active_decoration",general_jumpPad8ActiveColor:"general/jump_pad_8_active_color",general_jumpPad9ActiveDecoration:"general/jump_pad_9_active_decoration",general_jumpPad1Border:"general/jump_pad_1_border",general_jumpPad1Color:"general/jump_pad_1_color",general_jumpPad1Palette:"general/jump_pad_1_palette",general_jumpPad2Border:"general/jump_pad_2_border",general_jumpPad3Decoration:"general/jump_pad_3_decoration",general_jumpPad4Border:"general/jump_pad_4_border",general_jumpPad4Decoration:"general/jump_pad_4_decoration",general_jumpPad4DecorationCenter:"general/jump_pad_4_decoration_center",general_jumpPad5Decoration:"general/jump_pad_5_decoration",general_jumpPad6Decoration:"general/jump_pad_6_decoration",general_jumpPad7Decoration:"general/jump_pad_7_decoration",general_jumpPad8Color:"general/jump_pad_8_color",general_jumpPad9Decoration:"general/jump_pad_9_decoration",general_decoration1:"general/decoration_1",general_decoration2:"general/decoration_2",general_decoration2Outline:"general/decoration_2_outline",general_mainBorder1:"general/main_border_1",general_mainBorder2Top:"general/main_border_2_top",general_mainBorder2Bottom:"general/main_border_2_bottom",general_mainBorder3:"general/main_border_3",general_mainBorder4:"general/main_border_4",general_mainBorder5Top:"general/main_border_5_top",general_mainBorder5Bottom:"general/main_border_5_bottom",general_mainBorder6Top:"general/main_border_6_top",general_mainBorder6Bottom:"general/main_border_6_bottom",general_mainBorder7Decoration1:"general/main_border_7_decoration_1",general_mainBorder7Decoration2:"general/main_border_7_decoration_2",general_mainBorder7Decoration3:"general/main_border_7_decoration_3",general_mainBorder7Decoration4:"general/main_border_7_decoration_4",general_mainBorder8:"general/main_border_8",general_mainPalette1Shadow:"general/main_palette_1_shadow",general_mainPalette11:"general/main_palette_1_1",general_mainPalette11Overlay:"general/main_palette_1_1_overlay",general_mainPalette12:"general/main_palette_1_2",general_mainPalette12Overlay:"general/main_palette_1_2_overlay",general_mainPalette13:"general/main_palette_1_3",general_mainPalette14:"general/main_palette_1_4",general_mainPalette14Overlay:"general/main_palette_1_4_overlay",general_mainPalette15:"general/main_palette_1_5",general_mainPalette2Shadow:"general/main_palette_2_shadow",general_mainPalette21:"general/main_palette_2_1",general_mainPalette21Overlay:"general/main_palette_2_1_overlay",general_mainPalette22:"general/main_palette_2_2",general_mainPalette22Overlay:"general/main_palette_2_2_overlay",general_mainPalette23:"general/main_palette_2_3",general_mainPalette24:"general/main_palette_2_4",general_mainPalette24Overlay:"general/main_palette_2_4_overlay",general_mainPalette25:"general/main_palette_2_5",mover_BorderStyle1:"mover/border_style_1",mover_ArrowActiveBorder:"mover/arrow_active_border",mover_ArrowActiveColor:"mover/arrow_active_color",mover_ArrowActiveInnerColor:"mover/arrow_active_inner_color",mover_ArrowActivePalette:"mover/arrow_active_palette",mover_ArrowInactiveBorder:"mover/arrow_inactive_border",mover_ArrowInactiveColor:"mover/arrow_inactive_color",mover_ArrowInactiveInnerColor:"mover/arrow_inactive_inner_color",mover_ArrowInactivePalette:"mover/arrow_inactive_palette",fragile_border1Outline:"fragile/border_1_outline",fragile_border1Stripe:"fragile/border_1_stripe",fragile_border2Outline:"fragile/border_2_outline",fragile_border2Stripe:"fragile/border_2_stripe",fragile_border3Abstract:"fragile/border_3_abstract",fragile_decoration1:"fragile/decoration_1",fragile_decoration2:"fragile/decoration_2",fragile_border1:"fragile/border_1",fragile_border2:"fragile/border_2",fragile_border3:"fragile/border_3",fragile_border4:"fragile/border_4",fragile_topLeftLQGemColor:"fragile/top_left_lq_gem_color",fragile_topLeftLQGemOutline:"fragile/top_left_lq_gem_outline",fragile_topLeftMidgroundDarken:"fragile/top_left_midground_darken",fragile_topLeftMidgroundLighten:"fragile/top_left_midground_lighten",fragileActive_checkerBottom1:"fragileactive/checker_bottom_1",fragileActive_checkerBottom2:"fragileactive/checker_bottom_2",fragileActive_checkerTop1:"fragileactive/checker_top_1",fragileActive_checkerTop2:"fragileactive/checker_top_2",fragileActive_highscoreBottom1:"fragileactive/highscore_bottom_1",fragileActive_highscoreBottom2:"fragileactive/highscore_bottom_2",fragileActive_highscoreBottom3:"fragileactive/highscore_bottom_3",fragileActive_highscoreTop1:"fragileactive/highscore_top_1",fragileActive_highscoreTop1Outline:"fragileactive/highscore_top_1_outline",fragileActive_highscoreTop2:"fragileactive/highscore_top_2"};var ImageAssets={},loader=document.querySelector("#loader"),page=document.querySelector("#page"),container=document.querySelector("#container"),loaderBarFill=document.querySelector("#loaderBarFill");class Timer{constructor(){this.startTime=null,this.pauseTime=null,this.elapsedTime=0,this.isRunning=!1}start(){this.isRunning||(this.startTime=new Date,this.isRunning=!0)}stop(){this.isRunning&&(this.elapsedTime+=this.getCurrentElapsedTime(),this.startTime=null,this.isRunning=!1)}pause(){this.isRunning&&(this.pauseTime=new Date,this.elapsedTime+=this.getCurrentElapsedTime(),this.isRunning=!1)}clear(){this.startTime=null,this.pauseTime=null,this.elapsedTime=0,this.isRunning=!1}getCurrentElapsedTime(){return this.pauseTime?this.pauseTime-this.startTime:new Date-this.startTime}getTime(){return this.isRunning?this.elapsedTime+this.getCurrentElapsedTime():this.elapsedTime}}function loadAll(){View.Open("LoaderMenu");var e=new Timer;e.start();let t=0,r=Object.keys(ImageSources).length;function o(t){if(loaderBarFill.style.width=t+"%",100==t){var r=!1,o=document.title,a=setInterval(e=>{r?(document.title="[ Loading Finished ]",r=!r):(document.title=o,r=!r),"visible"==document.visibilityState&&(document.title=o,clearInterval(a))},100);e.stop(),View.Close("LoaderMenu"),console.log("loading time:",e.getTime(),"ms"),document.querySelector("#loadLabel").innerHTML="Loading Time: <u>"+e.getTime()/1e3+"s</u>"}}function a(e,o){let a=document.createElement("img");a.src=e,a.addEventListener("load",()=>{t++,ImageAssets[o]=a,document.querySelector("#hidden").appendChild(a),t===r&&(loader.className="hide",page.className="show",SpriteMaker.Initialize())}),a.addEventListener("error",()=>{++t===r&&(loader.className="hide",page.className="show",SpriteMaker.Initialize())})}window.unzipAndLoadImages=(e,t)=>{JSZip.loadAsync(e).then(function(e){let r=[];try{e.file("assets/meta.json").async("text").then(function(e){var r=JSON.parse(e);1==t?alert('Loading "'+r.name+'" by '+r.author+"."):0==o.length&&(document.querySelector(".loaderText").textContent='Loading "'+r.name+'" by '+r.author+".")})}catch{document.querySelector(".loaderText").innerHTML="Metadata File Missing"}var o=[];for(let l in ImageSources){let n="assets/"+ImageSources[l]+".png";try{let i=e.file(n).async("blob").then(function(e){let t=URL.createObjectURL(e);a(t,l)});r.push(i)}catch{o.push(n)}}if(o.length>0){var p=[];o.forEach(e=>{p.push('<span>"'+e+'"</span>')}),1==t&&(loader.removeAttribute("class"),page.removeAttribute("class")),loader.innerHTML='<span class="loaderText">Missing Files:</span><p style="max-height: 40vh;max-width: 60vw;overflow: auto;">'+p.join("<br>")+"</p>"}Promise.all(r).then(function(){})}).catch(e=>{loader.innerHTML='<span class="loaderText">Image Asset ZIP File Error</span>'})},window.trackProgress=(e,t=0)=>{fetch(e,{mode:"cors"}).then(function(e){let r=e.headers.get("content-length"),a=e.body.getReader(),l=[],n=0;function i(e){if(e.done){let p=new Blob(l,{type:"application/octet-stream"});unzipAndLoadImages(p,t);return}n+=e.value.length;let m=n/r*100;return o(m),l.push(e.value),a.read().then(i)}return a.read().then(i)}).catch(function(e){"TypeError"===e.name&&"Failed to fetch"===e.message&&window.isLocallyHosted&&window.showLocalMachineTutorial()})},trackProgress("assets.zip")}Array.prototype.add=function(e){var t=this;let r={};function o(e,t){for(let r in t)e.hasOwnProperty(r)?Array.isArray(e[r])&&Array.isArray(t[r])?e[r]=e[r].concat(t[r]):"object"==typeof e[r]&&"object"==typeof t[r]?o(e[r],t[r]):e[r]=t[r]:e[r]=t[r]}return o(r,t[0]),o(r,e[0]),[r]};class Spritesheet{#a={};Name="";Type=0;Features=[];HasBeenChanged=!1;FirstChangeCall=()=>{};constructor(e){this.SetData(e)}SetData(e){if(this.HasBeenChanged=!1,void 0!=e&&null!=e){this.Data=e.copy(),this.Data.version=spritemakerVersion,this.Name=e.name,this.Type=e.type,this.Features=e.features.copy(),cachedSpriteData[e.type]=e;var t=!1;spriteTemplates.copy().forEach(e=>{e.features==this.Features&&(t=!0)}),""!=CollectionManager.CurrentlyEditing&&CollectionManager.UpdateReplace(CollectionManager.CurrentlyEditing)}}get string(){return this.Data.version=spritemakerVersion,this.Data.name=this.Name,this.Data.features=this.Features,JSON.stringify(this.Data)}Save(){localStorage.setItem("lastSpritesheet",this.string)}SetProperty(e,t,r){this.HasBeenChanged||this.FirstChangeCall(),this.HasBeenChanged=!0;try{let o=this.Features.find(t=>t.name===e);if(o)o.properties[t]=r;else{var a={name:e,properties:{[t]:r}};this.Features.push(a)}return this.Save(),""!=CollectionManager.CurrentlyEditing&&CollectionManager.UpdateReplace(CollectionManager.CurrentlyEditing),!0}catch{return!1}}RemoveProperty(e){try{let t=this.Features.find(t=>t.name===e);if(t)t[property]=value;else{let r={name:e,[property]:value};this.Features.push(r)}return this.Save(),!0}catch{return!1}}GetProperty(e,t){let r=this.Features.find(t=>t.name.toLowerCase()==e.toLowerCase());if(void 0==r)return!1;var o=spriteTemplates[this.Type].copy().features.find(t=>t.name.toLowerCase()==e.toLowerCase());if(void 0==r.properties[t]){if("all"==t)return o.properties;if(void 0!=(o=o.properties[t]))return console.log("updated",o,[e,t]),o}var a=r.properties[t];if(void 0!=o){var l=o.properties[t];a.length<l.length&&(a+=l.slice(a.length))}return"all"==t?r.properties:a}SetValue(e,t,r){this.HasBeenChanged||this.FirstChangeCall(),this.HasBeenChanged=!0;try{let o=this.Features.find(t=>t.name===e);if(o)o.values[t]=r;else{var a={name:e,values:{[t]:r}};this.Features.push(a)}return this.Save(),!0}catch{return!1}}GetValue(e,t){let r=this.Features.find(t=>t.name.toLowerCase()==e.toLowerCase());try{if(!r.values&&!r.values[t])return{}}catch{return{}}if(void 0==r.values[t]){var o=spriteTemplates[this.Type].copy().features.find(t=>t.name.toLowerCase()==e.toLowerCase());if("all"==t)return o.values;if(void 0!=(o=o.values[t]))return console.log("updated",o,[e,t]),o}return"all"==t?r.values:r.values[t]}}class VariableCache{CacheItems={};MaxItems=10;constructor(e=10){this.MaxItems=e}Add(e,t){this.CacheItems[e]=t;let r=Object.keys(this.CacheItems),o=r.length;if(o>this.MaxItems)for(let a=0;a<o-this.MaxItems;a++)delete this.CacheItems[r[a]]}Get(e){return this.CacheItems[e]}Clear(){this.CacheItems={}}}function updateSpriteOptions(e,t){Object.keys(inputs[e]).forEach(t=>{if(!window.minimalOptions||-1!=window.visibleOptions.indexOf(e+"."+t))try{sprite.SetProperty(e,t,inputs[e][t].value)}catch{}try{sprite.SetValue(e,t,parseFloat(inputs[e][t].value))}catch{}}),renderSprite(e,t)}function renderSprite(e,t){try{clearTimeout(currentDrawTimeoutAlt),clearTimeout(currentDrawTimeout)}catch{}SpriteMaker.Data.Draw(sprite,document.querySelector("#main")),checkFormForRelevantChanges(e,t)}function checkFormForRelevantChanges(e,t){if(t&&t.target&&t.target.tagName&&"select"==t.target.tagName.toLowerCase()&&(SpriteMaker.Data.Draw(sprite,document.querySelector("#main"),!0),window.minimalOptions))try{jscolor.hide(),makeUI(e)}catch{}}function makeUI(e){console.log("making ui for",e),closeUI();var t=['<span class="heading">'+e.replaceAll("_"," ")+"</span>"],r=[];function o(e){return e.startsWith("#")?e.slice(0,9):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}!1!=sprite.GetValue(e,"all")&&(r=Object.keys(sprite.GetValue(e,"all"))).forEach(r=>{var o=sprite.GetValue(e,r);if(!isNaN(o)&&void 0!=o&&null!=o){var a=[],l=spriteValues[sprite.Type];void 0!=l&&(l=l.find(t=>t.name===e));var n=l&&l.values&&l.values[r];void 0==l?(console.log("spriteValues does not contain",e),a.push('<option selected value="0">Default</option>')):n?Object.keys(l.values[r]).forEach(e=>{var t=l.values[r][e];a.push("<option "+(t.key==o?"selected ":"")+'value="'+t.key+'">'+t.value+"</option>")}):a.push('<input id="'+r+'" type="number" placeholder="'+o+'" value="'+o+'" step="0.1">'),n?t.push('<label for="'+r+'">'+r.replaceAll("_"," ")+'<select id="'+r+'" value="'+o+'"/>'+a.join("")+"</select></label>"):t.push('<label for="'+r+'">'+r.replaceAll("_"," ")+a.join("")+"</label>")}});var a=Object.keys(sprite.GetProperty(e,"all"));a.forEach(r=>{var a=sprite.GetProperty(e,r),l=parseInt(a);void 0!=a&&null!=a&&isNaN(l)&&(!window.minimalOptions||-1!=window.visibleOptions.indexOf(e+"."+r))&&t.push('<label for="'+r+'">'+r.replaceAll("_"," ")+"<div>"+(["Palette_Order"].includes(r)?"<button onclick=\"info('"+r+"')\">Info</button>":"")+"<input "+(a.startsWith("#")&&!("number"==typeof a&&a.toString().includes("."))?'data-jscolor="{}"':"")+'inputmode="none" placeholder="'+o(a).toUpperCase()+'" id="'+r+'" value="'+o(a)+'"/></div></label>')});var l=document.createElement("div");l.id="mainform",window.formElement=document.createElement("form"),formElement.id="spriteform",formElement.setAttribute("data-propertyname",e),formElement.innerHTML=t.join(""),formElement.action="javascript:void(0)",formElement.onchange=function(t){updateSpriteOptions(e,t)},l.appendChild(formElement),window.inputs={},inputs[e]={},a.forEach(t=>{inputs[e][t]=l.querySelector("#"+t)}),r.forEach(t=>{inputs[e][t]=l.querySelector("#"+t)}),document.querySelector("#widthController").appendChild(l),JSColor.install()}function closeUI(){document.querySelector("#mainform")&&document.querySelector("#mainform").remove()}function info(e){"Palette_Order"===e?PopupManager.showMessage(`Palette Order is a feature where you can customize your own palettes. You can either choose to use the embedded editor below or edit the JSON with a text editor.

<iframe id="paletteOrderInterface" src="paletteOrderInterface.html" style="width: 100%;border: none;outline: none;height: 450px;border-radius: 15px;"></iframe>

You need to know the basics of JSON before you can edit this.

To assist with editing, you can use <a href="https://jsoneditoronline.org/" target="_blank">https://jsoneditoronline.org/</a> to format and compress your JSON.

This is an example of something that would go into the input box: <code>{"elements": [{"position": 6, "type": 1, "colors": ["#ff0000","#ffff00","#00ff00","#00aaff"]}]}</code>
The "elements" key contains an array of objects that represent mini color palettes. You may add as many elements to the array as you need.

The "position" value defines where the palette is placed. Each shade on the background palette represents a position.

<img src="tutorials/1-1.png" width="320px">

Available Types:
${PaletteOrderList.join("\n")}

The "colors" array contains all the colors that the palette will use. The colors will be used left to right, and they will wrap to the next row of elements logically. Extra colors will be ignored.

The number in parenthesis after the Type Name in the list represents how many colors are used.

And lastly, "alwaysOnTop" controls whether the palettes are drawn above everything else. It's helpful if you don't want to turn off all those options. You don't have to include the "alwaysOnTop" option in your JSON.

If the JSON is not valid, your custom palettes will not show.

Try this JSON which shows off most of the current Available Types:

<code>{"alwaysOnTop": true, "elements": [{"position": 1, "type": 0, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 2, "type": 1, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 3, "type": 2, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 4, "type": 3, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 5, "type": 4, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 6, "type": 5, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 7, "type": 6, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 8, "type": 7, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 9, "type": 8, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 10, "type": 9, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 11, "type": 10, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]},{"position": 12, "type": 11, "colors": ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffddff","#ddffff"]}]}</code><style>
	code {
		display: block;
		padding: 20px;
		margin: 10px 0;
		background: #1f2023;
		border-radius: 10px;
		font-family: monospace !important;
		font-size: 16px;
	}
</style>`,"How to use Palette Order"):console.log("info invalid key")}function AssignHitbox(e,t,r,o,a,l=!1){if("object"==typeof e){var n=e;e=n[0],t=n[1],r=n[2],o=n[3],a=n[4],l=n[5]||!1}var i=document.createElement("div");function p(e){e.stopPropagation();for(var t=document.querySelectorAll(".hitbox"),r=0;r<t.length;r++)t[r]!==i&&t[r].style.removeProperty("opacity");""==i.style.opacity?(i.style.opacity="1",makeUI(a)):(i.style.removeProperty("opacity"),closeUI())}function m(e){i.style.opacity="0",closeUI()}i.style.width=r+"px",i.style.height=o+"px",i.style.left=e+"px",i.style.top=t+"px",l&&(i.style.borderRadius=r+"px"),i.className="hitbox-"+a,i.addEventListener("click",p,{passive:!0}),i.addEventListener("touchstart",p,{passive:!0}),canvas.parentElement.addEventListener("click",m,{passive:!0}),canvas.parentElement.addEventListener("touchstart",m,{passive:!0}),i.classList.add("hitbox"),canvas.parentElement.appendChild(i)}function AssignHitboxes(e){document.querySelectorAll(".hitbox").forEach(e=>e.remove()),e.forEach(e=>{AssignHitbox(e)})}function copy(e,t=new Set){if("object"!=typeof e||null===e||t.has(e))return e;let r=Array.isArray(e)?[]:{};for(let o in t.add(e),e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=copy(e[o],t));return r}Object.defineProperty(Object.prototype,"copy",{value:function(){return copy(this)},writable:!0,configurable:!0}),Object.defineProperty(Array.prototype,"copy",{value:function(){return copy(this)},writable:!0,configurable:!0});const spriteValues=Object.freeze([[{name:"Laser_Beam",values:{Mode:[{key:"0",value:"Single"},{key:"1",value:"Double"},{key:"2",value:"Quadruple"}]}},{name:"Top_Right",values:{Type:[{key:"0",value:"Star"},{key:"1",value:"Palette"}],Background_Type:[{key:"0",value:"Solid"},{key:"1",value:"Palette"}],Gradient:[{key:"0",value:"Off"},{key:"1",value:"Single"},{key:"2",value:"Double"},{key:"3",value:"Stripes"},{key:"4",value:"Solid"}],Colored_Boxes:[{key:"0",value:"Off"},{key:"1",value:"On"}],Mini_Jump:[{key:"0",value:"Off"},{key:"1",value:"On"}],Rearranging_Cubes:[{key:"0",value:"Off"},{key:"1",value:"Cube"},{key:"2",value:"Sunset Glow"}],Spinning_Rhombus_Face:[{key:"0",value:"Off"},{key:"1",value:"On"}],Flip_Tile:[{key:"0",value:"None"},{key:"1",value:"Hourglass"},{key:"2",value:"Checkerboard"},{key:"3",value:"Flower"},{key:"4",value:"Diamond"},{key:"5",value:"Triple Square"},{key:"6",value:"U Shape"},{key:"7",value:"Boxed Star"},{key:"8",value:"Quad Circle"},{key:"9",value:"Fortune"},{key:"10",value:"Circle"},{key:"11",value:"Bishop Cross"},{key:"12",value:"Ionizing Radiation"},{key:"13",value:"Biohazard"}],Powerups:[{key:"0",value:"Off"},{key:"1",value:"On"}]}},{name:"Main_Stripe",values:{Type:[{key:"0",value:"None"},{key:"1",value:"Default"},{key:"2",value:"Split"},{key:"3",value:"Wide"},{key:"4",value:"Ignite"}]}},{name:"Alternate_Stripe",values:{Type:[{key:"0",value:"None"},{key:"1",value:"Default"},{key:"2",value:"Split"},{key:"3",value:"Wide"},{key:"4",value:"4 Colors"},{key:"5",value:"3 Gradients"},{key:"6",value:"1 Gradient"}],Always_On_Top:[{key:"0",value:"Off"},{key:"1",value:"On"}]}},{name:"Light_Color_Palette",values:{Type:[{key:"0",value:"Default"},{key:"2",value:"Super Glow"},{key:"1",value:"Thin"}]}},{name:"Dark_Color_Palette",values:{Type:[{key:"0",value:"Default"},{key:"2",value:"Super Glow"},{key:"1",value:"Thin"},{key:"3",value:"Extended"}]}},{name:"Gradient",values:{Type:[{key:"0",value:"Classic"},{key:"1",value:"Modern"},{key:"2",value:"Alternate Star"}],Decoration:[{key:"0",value:"None"},{key:"1",value:"Spikes"}]}},{name:"Riser_Top",values:{Type:[{key:"0",value:"Classic"},{key:"1",value:"Modern"},{key:"3",value:"Multi-Purpose Palette"},{key:"2",value:"Anniversary Palette"}]}},],[{name:"Top_Left",values:{Type:[{key:"0",value:"General"},{key:"1",value:"Mover/MoverAuto"}],Inactive_Jump_Pad_Style:[{key:"0",value:"Default"},{key:"1",value:"Cut Edge"},{key:"2",value:"Net"},{key:"3",value:"Double Square"},{key:"4",value:"Chinese"},{key:"5",value:"Checkerboard"},{key:"6",value:"Honeycomb"},{key:"7",value:"Kat"},{key:"8",value:"Dino"}],Active_Jump_Pad_Style:[{key:"0",value:"Default"},{key:"1",value:"Cut Edge"},{key:"2",value:"Net"},{key:"3",value:"Double Square"},{key:"4",value:"Chinese"},{key:"5",value:"Checkerboard"},{key:"6",value:"Honeycomb"},{key:"7",value:"Kat"},{key:"8",value:"Dino"}]}},{name:"General",values:{Border_Style:[{key:"0",value:"Default"},{key:"1",value:"Cut Edge"},{key:"5",value:"Borderless Cut Edge"},{key:"4",value:"Spread"},{key:"2",value:"Thin"},{key:"3",value:"Glow"},{key:"6",value:"Super Glow"}],Decoration_Type:[{key:"0",value:"None"},{key:"1",value:"Heat"},{key:"2",value:"Border"},{key:"3",value:"Metal Panels"}]}},],[{name:"Top_Left",values:{Type:[{key:"0",value:"Fragile"},{key:"1",value:"FragileActive"}],Highscore_Style:[{key:"0",value:"Classic"},{key:"1",value:"Modern (Boxes)"},{key:"2",value:"Modern (Text Only)"}]}},{name:"Fragile",values:{Border_Style:[{key:"0",value:"Default"},{key:"1",value:"Wide"},{key:"6",value:"Thin"},{key:"2",value:"Extended Thin"},{key:"3",value:"Basic Stripes"},{key:"4",value:"Boxes"},{key:"5",value:"Jade Rabbit"}],Decoration_Type:[{key:"0",value:"None"},{key:"1",value:"Pixels"},{key:"2",value:"Snowflakes"}]}},]]),spriteTemplates=Object.freeze([{name:"Enemy1",type:0,features:[{name:"Laser_Center",properties:{Laser_Color:"#5affff",Laser_Outline:"#2CA3D9FF",Laser_Center:"#FFFFFF"}},{name:"Laser_Beam",values:{Mode:0},properties:{Laser_Color_1:"#5affffff",Laser_Center_1:"#ffffffff",Laser_Color_2:"#5AFFFFCA",Laser_Center_2:"#FFFFFFCA",Laser_Color_3:"#F86476ff",Laser_Center_3:"#ffffffff",Laser_Color_4:"#F86476D9",Laser_Center_4:"#FFFFFFD9"}},{name:"Top_Right",values:{Type:0,Background_Type:1,Gradient:1,Colored_Boxes:0,Mini_Jump:1,Rearranging_Cubes:1,Spinning_Rhombus_Face:1,Flip_Tile:1,Powerups:1},properties:{Background:"#989089",Palette_Order:'{"elements": []}',Star_Inactive_Color:"#3abcba",Star_Active_Color:"#30efee",Star_Inactive_Shadow_Color:"#000000",Star_Active_Shadow_Color:"#000000",Palette_Gradient:"#FFFFFFFF",Palette_Gradient_2:"#68D1FFFF",Palette_Gradient_Stripes:"#F90000D5",Colored_Box_Background:"#000000",Colored_Box_1_Color:"#97ff08",Colored_Box_2_Color:"#12eaff",Colored_Box_3_Color:"#1393ff",Colored_Box_4_Color:"#ff5bbe",Colored_Box_5_Color:"#8420ff",Colored_Box_6_Color:"#ffa600",Colored_Box_7_Color:"#fff512",Colored_Box_8_Color:"#ff0f10",Inactive_Mini_Jump_Top:"#fcc993",Inactive_Mini_Jump_Side:"#f1fffa",Active_Mini_Jump_Top:"#f59e62",Active_Mini_Jump_Side:"#b0564f",Rearranging_Cube_Top_Background_Color:"#ffd061",Rearranging_Cube_Top_Pattern_Color:"#ffebb3",Rearranging_Cube_Bottom_Background_Color:"#ffa43b",Rearranging_Cube_Bottom_Pattern_Color:"#ffdf70",Rearranging_Cube_Border_Color:"#78493d",Sunset_Cubes_Pattern_Color:"#f7a51d",Spinning_Rhombus_Face_Background:"#8cb9b4",Spinning_Rhombus_Face_Overlay:"#a26555",Flip_Tile_Side_Color:"#81685cff",Inactive_Flip_Tile_Background:"#727f7d",Inactive_Flip_Tile_Color_1:"#8fb5b1ff",Inactive_Flip_Tile_Color_2:"#8fb5b17d",Active_Flip_Tile_Background:"#ecc75c",Active_Flip_Tile_Color_1:"#fffb96ff",Active_Flip_Tile_Color_2:"#fffb967d",Powerup_Dark_Color:"#434a5b",Powerup_Icon_Color:"#fefefe",Powerup_Custom_Gradient:"#ffffff"}},{name:"Main_Stripe",values:{Type:1},properties:{Background:"#afa69d",Color:"#30efee",Shadow:"#000000ff"}},{name:"Alternate_Stripe",values:{Type:0,Always_On_Top:0},properties:{Background:"#afa69d",Color:"#30efee",Shadow:"#000000ff",Color_1:"#FF0000FF",Color_2:"#25FF00FF",Color_3:"#008BFFFF",Color_4:"#FFFFFFFF"}},{name:"Light_Color_Palette",values:{Type:0,Super_Glow_Amount:1.75},properties:{Color_1_Border:"#1b8887",Color_1_Background:"#24b4b3",Color_2_Border:"#1d9392",Color_2_Background:"#27c3c2",Color_2_Addition:"#FFFFFF40",Color_3_Border:"#209e9d",Color_3_Background:"#2ad2d1",Color_4_Border:"#21a4a3",Color_4_Background:"#2cdad9",Color_5_Border:"#07a9a7",Color_5_Background:"#09e0de",Color_6_Border:"#07a9a7",Color_6_Background:"#09e0de",Hexagon_Circle_Center:"#7f7f7fff"}},{name:"Dark_Color_Palette",values:{Type:0,Super_Glow_Amount:1.75},properties:{Color_1_Border:"#47423d",Color_1_Background:"#5e5751",Color_1_Addition:"#FFFFFF10",Color_2_Border:"#47423d",Color_2_Background:"#5e5751",Color_3_Border:"#66605a",Color_3_Background:"#877f77",Color_4_Border:"#544f4b",Color_4_Background:"#706963",Color_5_Border:"#847d76",Color_5_Background:"#afa69d",Color_6_Border:"#625d58",Color_6_Background:"#817a74",Color_6_Addition:"#FFFFFF10",Color_7_Border:"#a5643c",Color_7_Background:"#c46934",Color_8_Border:"#76452a",Color_8_Background:"#914a27",Color_9_Border:"#683e24",Color_9_Background:"#763d1c",Color_10_Border:"#297829",Color_10_Background:"#09a13b",Color_11_Border:"#1f5b20",Color_11_Background:"#06792e",Color_12_Border:"#1c4b19",Color_12_Background:"#086021"}},{name:"Gradient",values:{Type:0,Decoration:0},properties:{Darken_Color:"#3f3936",Lighten_Color:"#7f7872",Glow_Color:"#FFFFFF60",Border_Color:"#4d4642",Decoration_Color:"#ffffffff",Strip_Lighten_Color:"#30efee",Strip_Darken_Color:"#1de8e6",Dynamic_Cube_Floater_Color:"#30efee"}},{name:"Riser_Top",values:{Type:0},properties:{Background:"#afa69d",Left_Outer_Border:"#857d76",Left_Inner_Border:"#857d76",Left_Inner_Color:"#24b4b3",Right_Outer_Border:"#857d76",Right_Inner_Border:"#857d76",Right_Inner_Color:"#30efee",Palette_1_Color:"#f6f5f6",Palette_2_Color:"#e2e1e5",Palette_3_Color:"#cdccd4",Palette_4_Color:"#b6b5c1",Palette_5_Color:"#9d9bac",Palette_6_Color:"#fee0c5",Palette_7_Color:"#fecaa8",Palette_8_Color:"#efa676",Palette_9_Color:"#7d81bd",Palette_10_Color:"#5e64a2",Palette_11_Color:"#fef4de",Palette_12_Color:"#fef186",Palette_13_Color:"#a0a09c",Palette_14_Color:"#8f9089",Palette_15_Color:"#fafafb",Palette_16_Color:"#458ac2",Palette_17_Color:"#cd985e",Palette_18_Color:"#b68c59",Palette_19_Color:"#a07643",Palette_20_Color:"#866338",Palette_21_Color:"#70502e",Palette_22_Color:"#604429",Palette_23_Color:"#4c3726",Palette_24_Color:"#daa462",Palette_25_Color:"#3b4450"}},]},{name:"General1",type:1,features:[{name:"Top_Left",values:{Type:0,Active_Jump_Pad_Style:0,Inactive_Jump_Pad_Style:0},properties:{Active_Jump_Pad_Color:"#feab2c",Active_Jump_Pad_Border:"#ffff00",Active_Jump_Pad_Side:"#ffff00",Active_Jump_Pad_Decoration_1:"#FFFF0090",Active_Jump_Pad_Decoration_2:"#ffffff00",Active_Jump_Pad_Decoration_3:"#ffffff50",Inactive_Jump_Pad_Color:"#fd873e",Inactive_Jump_Pad_Border:"#eb7a38",Inactive_Jump_Pad_Side:"#d67040",Inactive_Jump_Pad_Decoration_1:"#eb7a3890",Inactive_Jump_Pad_Decoration_2:"#ffffff00",Inactive_Jump_Pad_Decoration_3:"#ffffff00",Active_Mover_Arrow_Color:"#feab2c",Active_Mover_Arrow_Inner_Color:"#ffffff00",Active_Mover_Arrow_Border:"#ffff00",Active_Mover_Arrow_Side:"#ffff00",Inactive_Mover_Arrow_Color:"#fd873e",Inactive_Mover_Arrow_Inner_Color:"#ffffff00",Inactive_Mover_Arrow_Border:"#eb7a38",Inactive_Mover_Arrow_Side:"#eb7a38",Mover_Border_Outline:"#db7032"}},{name:"Palette",properties:{Shadow:"#e69e4cff",Square_1:"#e69f43ff",Square_1_Overlay:"#dd9647AC",Square_2:"#eaa442ff",Square_2_Overlay:"#dd9647AC",Square_3:"#c27f38ff",Square_4:"#da9540ff",Square_4_Overlay:"#d38e42AC",Square_5:"#cb873dff"}},{name:"General",values:{Border_Style:0,Decoration_Type:0},properties:{Background:"#fdb643ff",Border:"#e69e4cff",Lower_Border:"#E69E4C90ff",Decoration_Color_1:"#FF9B3C52",Decoration_Color_2:"#B76F2244",Decoration_Color_3:"#B76F2252"}}]},{name:"Fragile1",type:2,features:[{name:"Top_Left",values:{Type:0,Highscore_Style:2},properties:{Low_Quality_Gem_Color:"#ff6044",Low_Quality_Gem_Outline:"#ff7751ff",Midground_Gradient_Top:"#12d9e0",Midground_Gradient_Bottom:"#20c7d1",Top_Checker_1:"#fdb6447f",Top_Checker_2:"#fd873e7f",Bottom_Checker_1:"#fdb6447f",Bottom_Checker_2:"#fd873e7f",Top_Highscore_Color:"#FFFFFFC7",Top_Highscore_Outline:"#FDB644B9",Bottom_Highscore_Color:"#FFE500BD"}},{name:"Palette",properties:{Shadow:"#9fe0ffff",Square_1:"#6697a9ff",Square_1_Overlay:"#9fe0ff00",Square_2:"#80c7d2cf",Square_2_Overlay:"#9fe0ffff",Square_3:"#90bcc5ff",Square_4:"#8cd1e0df",Square_4_Overlay:"#9fe0ffff",Square_5:"#9fe0ffff"}},{name:"Fragile",values:{Border_Style:0,Decoration_Type:0},properties:{Background:"#72bcbfbf",Stripes:"#ade5f0ff",Border:"#9fe0ffff"}}]}]);var cachedSpriteData=[spriteTemplates[0].copy(),spriteTemplates[1].copy(),spriteTemplates[2].copy(),],spritename=document.querySelector("#spritename"),minimaloptions=document.querySelector("#minimaloptions"),spriteType=document.querySelector("#spriteType");function updateNameType(){sprite.Name=spritename.value,localStorage.setItem("showMinimalOptions",minimaloptions.checked?"true":"false"),window.minimalOptions=minimaloptions.checked}function sprDownload(e){switch(e){case 0:var t=document.createElement("a");t.download=sprite.Name+".png",t.href=canvas.toDataURL(),t.click();break;case 1:var t=document.createElement("a");t.download=sprite.Name+".rs",t.href="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(toBinary(sprite.string)),t.click()}}function toBinary(e){let t=new Uint16Array(e.length);for(let r=0;r<t.length;r++)t[r]=e.charCodeAt(r);return btoa(String.fromCharCode(...new Uint8Array(t.buffer)))}function fromBinary(e){let t=atob(e),r=new Uint8Array(t.length);for(let o=0;o<r.length;o++)r[o]=t.charCodeAt(o);return String.fromCharCode(...new Uint16Array(r.buffer))}window.onload=()=>{document.body.scrollTo(0,0)},localStorage.getItem("showMinimalOptions")||localStorage.setItem("showMinimalOptions","true"),window.minimalOptions="true"==localStorage.getItem("showMinimalOptions"),minimaloptions.checked=window.minimalOptions;const fileInput=document.getElementById("fileuploadinput");fileInput.addEventListener("change",e=>{if(0!=fileInput.files.length){var t=new FileReader;t.onload=function(){var e="";console.log("File contents: ",t.result);try{e=LevelEncryptor.decrypt(t.result)}catch{}if((""==e||null==e||void 0==e)&&(e=LZString.decompress(t.result)),""==e||null==e||void 0==e)try{e=fromBinary(decodeURIComponent(t.result))}catch{alert("Malformed Project File.")}var r=JSON.parse(e);(!r.version||versionGreater(spritemakerVersion,r.version))&&(r=JSON.parse(e.replaceAll("Pallet","Palette").replaceAll("pallet","palette"))),console.log(r),fileInput.value=null,context.clearRect(0,0,512,512),sprite.SetData(r),MainMenu.Exit(),sprite.Save()},t.readAsText(fileInput.files[0])}});const zipInput=document.getElementById("filezipinput");function handleZipFileSelect(e){if(0==zipInput.files.length)return;let t=e.target.files[0],r=new FileReader;r.onload=function(e){let t=e.target.result,r=new Blob([t],{type:"application/octet-stream"}),o=URL.createObjectURL(r);trackProgress(o,1)},r.readAsArrayBuffer(t)}zipInput.addEventListener("change",handleZipFileSelect,!1);var MainMenu={object:document.querySelector("#mainmenu"),object1:document.querySelector("#container"),LoadTemplate(e){sprite.SetData(spriteTemplates[e].copy()),sprite.FirstChangeCall=Counter.add,spritename.value=sprite.Name,MainMenu.Exit()},LoadPrevious(){var e=localStorage.getItem("lastSpritesheet");void 0!=e&&null!=e&&(sprite.SetData(JSON.parse(e)),spritename.value=sprite.Name,MainMenu.Exit())},Exit(){View.Close("MainMenu"),View.Open("MainEditor"),renderSprite(),spritename.value=sprite.Name,MainMenu.object.style.display="none",MainMenu.object1.style.display="block",""!=CollectionManager.CurrentlyEditing&&container.classList.add("collection"),document.body.scrollTo(0,0),clearInterval(window.liveUpdateAmount)},Enter(){function e(){Counter.get().then(e=>{spriteAmountMade.innerHTML=e})}View.Open("MainMenu"),View.Close("MainEditor"),closeUI(),MainMenu.object.style.display="block",MainMenu.object1.style.display="none",CollectionManager.CurrentlyEditing="",container.classList.remove("collection"),document.body.scrollTo(0,0),e(),window.liveUpdateAmount=setInterval(()=>{e()},1500),clearTimeout(window.liveUpdateTime)}};window.onbeforeunload=function(){return"Are you sure you want to reload the editor? Your progress on your spritesheet will only be saved if you have modified it."};const Counter={url:"",async add(){},async get(){}};function createNewSpritesheet(e){MainMenu.LoadTemplate(e)}window.closeTab=()=>{window.onbeforeunload=void 0,window.open("","_self").close()},window.hidePage=()=>{document.querySelector("#loader").style.display="none",document.querySelector("#page").style.display="none"},window.showLocalMachineTutorial=()=>{window.hidePage,PopupManager.showMessage('<ol><li>Go to <a href="https://nodejs.org/en/download" target="_blank">this link</a> and download NodeJS for your machine.</li><li>Install NodeJS by running the installer you have downloaded.</li><li>Go through the NodeJS installer wizard until it is finished.</li><li>Go to your computer console. For Windows, search "cmd" in your Start Menu (Windows Button).</li><li>Enter this command into your console and wait for it to finish:<span class="code">npm install http-server</span>You will know it is finished when a new ">" appears.</li><li>If you are on Windows, you can download <a href="localhost.bat" download target="_blank">this batch file</a> and place it in the same directory of your copy of the repository\'s index.html file. Run the batch file by double clicking on it. If you are not on Windows, you will navigate to the directory of your copy of the repository\'s index.html file and run:<span class="code">http-server -p 9000 -c -1</span></li><li>Open this link in your browser:<span class="code">localhost:9000</span></li><li>You will now be able to freely use SpriteMaker on your local machine, but make sure to stay alert for SpriteMaker updates!</li></ol><style>.code{display: block;margin: 10px 0;font-family: monospace !important;background: #424447;width: max-content;padding: 10px;border-radius: 10px;font-size: var(--baseFontSize);}</style>',"How to run SpriteMaker on a Local Machine?",["Leave>closeTab()~default"],!1)};const TimeAnnotation={Write(){let e=Date.now().toString(),t=[e.slice(0,6),e.slice(6,12),e.slice(12,18),];context.fillStyle="#000",context.fillRect(0,canvas.height-1,3,1);for(let r=0;r<t.length;r++)context.fillStyle=`#${t[r].padEnd(6,"0")}`,context.fillRect(r,canvas.height-1,1,1)},Read(e=!1){function t(e,t,r){return"#"+(16777216|e<<16|t<<8|r).toString(16).slice(1)}let r=context.getImageData(0,canvas.height-1,3,1).data,o="";for(let a=0;a<r.length;a+=4){let l=r[a],n=r[a+1],i=r[a+2],p=t(l,n,i).slice(1);o+=p}var m=parseInt(o)/1e5;if(!e)return m;function c(e){var t,r=new Date(e),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=r.getFullYear(),l=o[r.getMonth()],n=r.getDate(),i=r.getHours();return n+" "+l+" "+a+" "+i+":"+r.getMinutes()+":"+r.getSeconds()}return c(m)}},UUID={v4:()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))},Time={FromUNIX(e){var t,r=new Date(e),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=r.getFullYear(),l=o[r.getMonth()],n=r.getDate(),i=r.getHours();return n+" "+l+" "+a+" "+i+":"+r.getMinutes()+":"+r.getSeconds()}},CollectionManager={StorageName:"collections",CurrentlyEditing:"",CollectionData:[],Initialize(){let e=localStorage.getItem(CollectionManager.StorageName);if(e){let t=[];try{t=JSON.parse(e)}catch{return}CollectionManager.CollectionData=JSON.parse(JSON.stringify(t))}},Save(){localStorage.setItem(CollectionManager.StorageName,JSON.stringify(CollectionManager.CollectionData))},Add(e,t,r,o){CollectionManager.CollectionData.push({name:e,uuid:t,thumbnail:r,time:Date.now(),data:o})},GetThumbnail(){let e=document.createElement("canvas");e.width=128,e.height=128;let t=e.getContext("2d"),r=document.createElement("img");return r.src=canvas.toDataURL("image/png"),new Promise((o,a)=>{r.onload=()=>{t.drawImage(r,0,0,128,128),o(e.toDataURL("image/png"))}})},UpdateReplace(e,t=!1){let r=CollectionManager.Get(e);r.time=Date.now(),r.name=sprite.Name,r.data=sprite.Data,t&&CollectionManager.GetThumbnail().then(e=>{r.thumbnail=e})},Get(e){try{return CollectionManager.CollectionData[CollectionManager.CollectionData.findIndex(t=>null!=t&&t.uuid==e)]}catch{return!1}},Remove(e){try{return delete CollectionManager.CollectionData[CollectionManager.CollectionData.findIndex(t=>null!=t&&t.uuid==e)],!0}catch{return!1}},AddSprite(e){var t=UUID.v4();return CollectionManager.Add(e.Name,t,"",e.Data),CollectionManager.UpdateReplace(t,!0),CollectionManager.Save(),t},AddSpriteAuto(e){var t=CollectionManager.AddSprite(e);MainMenu.Enter(),CollectionManager.Edit(t,!1),CollectionManager.Menu.OpenAuto(),CollectionManager.Menu.OpenAuto()},Edit(e,t=!0){container.classList.add("collection"),sprite.SetData(CollectionManager.Get(e).data),t&&MainMenu.Exit(),CollectionManager.CurrentlyEditing=e,CollectionManager.Menu.Close(),CollectionManager.Save()},Rename(e,t){if(e&&t){var r=CollectionManager.CollectionData[CollectionManager.CollectionData.findIndex(t=>null!=t&&t.uuid==e)];r.name=t,r.data.name=t}},Delete(e){if(e)confirm("Press OK to delete this Spritesheet")&&(CollectionManager.Remove(e),CollectionManager.Menu.Load(),CollectionManager.Save())},Menu:{Element:document.querySelector("div#collectionmanagermenu"),Load(){var e=[];CollectionManager.CollectionData.forEach(t=>{t&&e.push('<div class="collectionItem" data-uuid="'+t.uuid+'"><div><input title="Rename Spritesheet" value="'+t.name+'" oninput="CollectionManager.Rename(\''+t.uuid+'\', this.value)"><img title="Spritesheet Preview" src="'+(t.thumbnail?t.thumbnail:"defaultSprite.png")+'"><span>'+Time.FromUNIX(t.time)+'</span></div><div><button title="Edit Spritesheet" onclick="CollectionManager.Edit(\''+t.uuid+'\')"><img src="icons/edit.png"></button><button title="Delete Spritesheet" onclick="CollectionManager.Delete(\''+t.uuid+'\')"><img src="icons/delete.png"></button></div></div>')}),CollectionManager.Menu.Element.children[2].innerHTML=e.join("")},OpenAuto(){CollectionManager.Menu.Load(),CollectionManager.Menu.Open()},Open(){View.Open("CollectionManager"),CollectionManager.Menu.Element.style.display="block"},Close(){View.Close("CollectionManager"),CollectionManager.Menu.Element.style.display="none"}}};CollectionManager.Initialize();var threeJSrenderCanvas=document.querySelector("#obstaclePreviewCanvas"),threeJSrenderMenu=document.querySelector("#obstaclePreviewMenu"),obstaclePreviewTypeSelect=document.querySelector("#obstaclePreviewTypeSelect");function param(e,t){var r;return new URLSearchParams(window.location.search).get(e)||t}const ObjectType={Gus:-1,Ground:0,JumpPad:1,Mover:2,FlipTile:3,Riser:4,Crusher:5,Tree:6,TreeLv8:7,TreeTh14:8,Shinto:9,ShintoLv8:10,ShintoTh14:11,PalmTree:12,Star:13,Roller:14,LargeHammer:15,SmallHammer:16,Slasher:17,Pyramid:18,Spotlight:19,Laser:20,Pillar:21,PillarLaser:22,Tetrominoes:23};var Texture={Enemy:"Enemy1",General:"General1",Fragile:"Fragile1",Mover:"Mover1",Gus:"Gus"};const scene=new THREE.Scene;var havePromptedRenderObstaclePreviewMobileCheckOnce=!1;function renderObstaclePreview(e,t=!1){havePromptedRenderObstaclePreviewMobileCheckOnce||(havePromptedRenderObstaclePreviewMobileCheckOnce=!0,t||PopupManager.showMessage("<h3>Mouse</h3>Left Mouse Button - Orbit<br>Right Mouse Button - Pan<br>Middle Mouse Button (Scroll) - Zoom<br>Middle Mouse Button (Drag) - Fast Zoom<h3>Touch</h3>One Finger - Orbit<br>Two Fingers (Drag) - Zoom<br>Two Fingers (Pinch) - Zoom","Controls")),Texture[["Enemy","General","Fragile"][sprite.Type]]=canvas.toDataURL(),Texture.Mover=Texture.General,2==sprite.Type&&(Texture.General=Texture.Fragile),closeObstaclePreview(),scene.isPaused=!1,threeJSrenderMenu.style.display="block",View.Open("ObstaclePreview");var r=0,o=0,a=0;let l=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.001,1e3);l.position.set(-2.5+r,2+o,-2.5+a);let n=new THREE.WebGLRenderer({canvas:threeJSrenderCanvas,alpha:!0});n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(0,0),n.setClearAlpha(0),n.alpha=!0;let i=new THREE.OBJLoader;function p(e,t,r=[0,0,0],o=[0,0,0],a=1){i.load("models/"+e+".obj",function(e){function l(e,t){let r=THREE.MathUtils.degToRad(t[0]),o=THREE.MathUtils.degToRad(t[1]),a=THREE.MathUtils.degToRad(t[2]);e.rotation.set(r,o,a)}e.position.set(r[0],r[1],r[2]),l(e,o),e.scale.set(a,a,a);let n=new THREE.MeshStandardMaterial({side:THREE.DoubleSide,transparent:!0}),i=new THREE.TextureLoader;i.load(t.startsWith("data:")?t:"textures/"+t+".png",function(e){e.alpha=!0,n.map=e,n.needsUpdate=!0}),e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=n)}),scene.add(e)})}let m=new THREE.AmbientLight("#dddddd");scene.add(m);let c=new THREE.DirectionalLight(16777215,.425);switch(c.position.set(-15,25,-35),scene.add(c),ObjectType[e]){case ObjectType.Gus:p("Gus",Texture.Gus,[0,0,0],[0,180,0]);break;case ObjectType.Ground:p("tileDGeo",Texture.General,[0,0,0],[90,0,0]),p("tileIGeo",Texture.General,[2,0,0],[90,0,0]),p("tileL1Geo",Texture.General,[4,0,0],[90,0,0]),p("tileLGeo",Texture.General,[6,0,0],[90,0,0]),p("tileODGeo",Texture.General,[0,0,2],[90,0,0]),p("tileOGeo",Texture.General,[2,0,2],[90,0,0]),p("tileT1aGeo",Texture.General,[4,0,2],[90,0,0]),p("tileT1bGeo",Texture.General,[6,0,2],[90,0,0]),p("tileT2Geo",Texture.General,[0,0,4],[90,0,0]),p("tileTGeo",Texture.General,[2,0,4],[90,0,0]),p("tileX1Geo",Texture.General,[4,0,4],[90,0,0]),p("tileX2aGeo",Texture.General,[6,0,4],[90,0,0]),p("tileX2bGeo",Texture.General,[0,0,6],[90,0,0]),p("tileX3Geo",Texture.General,[2,0,6],[90,0,0]),p("tileX4Geo",Texture.General,[4,0,6],[90,0,0]),p("tileXGeo",Texture.General,[6,0,6],[90,0,0]);break;case ObjectType.JumpPad:r=-1,p("tileJumpGeo",Texture.General,[0,0,0],[90,0,0]),p("tileJumpGeoActivated",Texture.General,[2,0,0],[90,0,0]);break;case ObjectType.Mover:p("moverArrowUnlitDownGeo",Texture.Mover,[0,0,0],[90,0,0]),p("tileGeo",Texture.Mover,[0,0,0]),p("moverArrowLitDownGeo",Texture.Mover,[2,0,0],[90,0,0]),p("tileGeo",Texture.Mover,[2,0,0]),p("tileDGeo",Texture.Mover,[0,0,2],[90,0,0]),p("tileIGeo",Texture.Mover,[2,0,2],[90,0,0]),p("tileL1Geo",Texture.Mover,[4,0,2],[90,0,0]),p("tileLGeo",Texture.Mover,[6,0,2],[90,0,0]),p("tileODGeo",Texture.Mover,[0,0,4],[90,0,0]),p("tileOGeo",Texture.Mover,[2,0,4],[90,0,0]),p("tileT1aGeo",Texture.Mover,[4,0,4],[90,0,0]),p("tileT1bGeo",Texture.Mover,[6,0,4],[90,0,0]),p("tileT2Geo",Texture.Mover,[0,0,6],[90,0,0]),p("tileTGeo",Texture.Mover,[2,0,6],[90,0,0]),p("tileX1Geo",Texture.Mover,[4,0,6],[90,0,0]),p("tileX2aGeo",Texture.Mover,[6,0,6],[90,0,0]),p("tileX2bGeo",Texture.Mover,[0,0,8],[90,0,0]),p("tileX3Geo",Texture.Mover,[2,0,8],[90,0,0]),p("tileX4Geo",Texture.Mover,[4,0,8],[90,0,0]),p("tileXGeo",Texture.Mover,[6,0,8],[90,0,0]);break;case ObjectType.FlipTile:r=-1,p("level_20_fanzhuanlumian01",Texture.Enemy,[0,0,0],[0,0,0]),p("level_20_fanzhuanlumian01",Texture.Enemy,[2,0,0],[0,0,180]);break;case ObjectType.Riser:r=-1,p("enemyRiserPassiveParts_Geo",Texture.Enemy,[0,0,0]),p("enemyRiserBase_Geo",Texture.General,[0,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("enemyRisenActiveParts_Geo",Texture.Enemy,[2,.625,0]),p("enemyRiserBase_Geo",Texture.General,[2,0,0]),p("tileGeo",Texture.General,[2,0,0]);break;case ObjectType.Crusher:p("enemyCrusher_Geo",Texture.Enemy),p("enemyCrusherShadow_Geo",Texture.General,[0,0,0],[90,0,0]),p("tileGeo",Texture.General);break;case ObjectType.Tree:case ObjectType.TreeLv8:case ObjectType.TreeTh14:switch(r=1,o=-.25,a=1,ObjectType[e]){case ObjectType.Tree:p("enemyTree",Texture.Enemy,[-2,0,0]);break;case ObjectType.TreeLv8:p("enemyTreeLv8",Texture.Enemy,[-2,0,0]);break;case ObjectType.TreeTh14:p("enemyTreeTh14",Texture.Enemy,[-2,0,0])}p("enemyTreeBase",Texture.General,[-2,0,0]),p("enemyTreeBase",Texture.General,[0,0,0]),p("enemyTreeBase",Texture.General,[2,0,0]),p("tileGeo",Texture.General,[-2,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("tileGeo",Texture.General,[2,0,0]);break;case ObjectType.Shinto:case ObjectType.ShintoLv8:case ObjectType.ShintoTh14:switch(r=1,o=-.25,a=1,ObjectType[e]){case ObjectType.Shinto:p("enemyShinto",Texture.Enemy,[0,0,0]);break;case ObjectType.ShintoLv8:p("enemyShintoLv8",Texture.Enemy,[0,0,0]);break;case ObjectType.ShintoTh14:p("enemyShintoTh14",Texture.Enemy,[0,0,0])}p("enemyShintoBase",Texture.General,[0,0,0]),p("tileGeo",Texture.General,[-1,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("tileGeo",Texture.General,[1,0,0]);break;case ObjectType.PalmTree:r=-1.25,p("enemyTree_palm",Texture.Enemy,[0,0,0]),p("enemyTree_palm_base",Texture.General,[0,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("enemyTreeAlt_palm",Texture.Enemy,[2.5,0,0]),p("enemyTree_palm_base",Texture.General,[2.5,0,0]),p("tileGeo",Texture.General,[2.5,0,0]);break;case ObjectType.Star:r=-1,o=-.5,p("enemyStarInactive_Geo",Texture.Enemy,[0,0,0]),p("tileGeo",Texture.General,[2,0,0]),p("enemyStarActive_Geo",Texture.Enemy,[2,2,0]),p("enemyStarActiveShadowGeo",Texture.General,[2,0,0],[90,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("enemyStarAltInactive_Geo",Texture.Enemy,[4,0,0]),p("tileGeo",Texture.General,[4,0,0]),p("enemyStarAltActive_Geo",Texture.Enemy,[6,2,0]),p("enemyStarActiveShadowGeo",Texture.General,[6,0,0],[90,0,0]),p("tileGeo",Texture.General,[6,0,0]);break;case ObjectType.Roller:r=-1,p("enemyRollerGeo",Texture.Enemy,[0,.5,0]),p("enemRollerShadow_Geo",Texture.General,[0,0,0],[90,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("enemyRollerGeoAlt",Texture.Enemy,[2,.5,0]),p("enemRollerShadow_Geo",Texture.General,[2,0,0],[90,0,0]),p("tileGeo",Texture.General,[2,0,0]);break;case ObjectType.LargeHammer:r=-1,p("enemyPounder_geoHammer",Texture.Enemy),p("enemyPounder_geoAxle",Texture.Enemy),p("enemyPounder_Geo",Texture.General),p("tileGeo",Texture.General);break;case ObjectType.SmallHammer:p("enemySlasherMini_geo",Texture.Enemy),p("enemySlasherBase_Geo",Texture.General),p("tileGeo",Texture.General);break;case ObjectType.Slasher:p("enemySlasher",Texture.Enemy),p("enemySlasherBase_Geo",Texture.General),p("tileGeo",Texture.General);break;case ObjectType.Pyramid:r=-1,p("enemyPyramid",Texture.Enemy,[0,0,0]),p("enemyPyramidShadow",Texture.General,[0,0,0]),p("enemyPyramidShadow",Texture.General,[2,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("tileGeo",Texture.General,[2,0,0]);break;case ObjectType.Spotlight:p("enemySpotlight_laserBeam",Texture.Enemy),p("enemySpotlight_projector",Texture.Enemy),p("enemyPounder_geoAxle",Texture.Enemy),p("enemyPounder_Geo",Texture.General),p("tileGeo",Texture.General);break;case ObjectType.Laser:r=-1,p("enemyLaser_geo",Texture.Enemy,[0,0,0]),p("enemyLaser_eyelids_geo",Texture.Enemy,[0,0,0]),p("tileGeo",Texture.General,[0,0,0]),p("enemyLaser_geo",Texture.Enemy,[2,0,0]),p("enemyLaser_beam_geo",Texture.Enemy,[2,0,0]),p("tileGeo",Texture.General,[2,0,0]);break;case ObjectType.Pillar:r=1,a=1,p("enemyPillar",Texture.General,[0,2,0]),p("enemySwitcherLv8",Texture.General,[2,2,0]),p("enemySwitcherLv9",Texture.General,[4,2,0]),p("enemySwitcherLv10",Texture.General,[6,2,0]);break;case ObjectType.PillarLaser:r=-1,p("enemyPillarLaser_parts1",Texture.Enemy,[0,-1.25,0]),p("enemyPillarLaser_parts2",Texture.General,[0,-1.25,0]),p("enemyPillarLaserAlt_parts1",Texture.Enemy,[3,-1.25,0]);break;case ObjectType.Tetrominoes:p("enemyTetrominoes",Texture.Enemy,[0,0,0])}let d=new THREE.OrbitControls(l,n.domElement);function s(){scene.isPaused||(requestAnimationFrame(s),d.update(),n.render(scene,l))}d.enableDamping=!0,d.dampingFactor=.075,d.zoomSpeed=2.75,d.target=new THREE.Vector3(-1*r,-1*o+.75,-1*a),s()}function closeObstaclePreview(){View.Close("ObstaclePreview"),scene.isPaused=!0,scene.remove.apply(scene,scene.children),threeJSrenderMenu.style.display="none"}function loadPaletteOrder(){document.querySelector("#paletteOrderInterface").contentWindow.postMessage(document.querySelector("#Palette_Order").value,"*")}function updateForm(){updateSpriteOptions("Top_Right","Palette_Order")}function isMobile(){var e=navigator.userAgent.indexOf("Windows Phone")>=0,t=navigator.userAgent.indexOf("Android")>0&&!e,r=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,o=r&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=r&&/OS [6-7]_\d/.test(navigator.userAgent);return e||t||r||o||a}obstaclePreviewTypeSelect.addEventListener("change",()=>{renderObstaclePreview(obstaclePreviewTypeSelect.value)}),window.addEventListener("message",function(event){let key=event.message?"message":"data",data=event[key];switch(data.substr(0,1)){case"{":"MainEditor"==View.TopmostView&&(document.querySelector("#Palette_Order").value=data);break;case"f":eval(data.split("f:")[1])}}),window.addEventListener("keyup",e=>{switch(e.key.toLowerCase()){case"escape":switch(View.TopmostView.toLowerCase()){case"mainmenu":PopupManager.showMessage('<iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/dQw4w9WgXcQ?autoplay=1&mute=1" title="YouTube video player" frameborder="0" allow="autoplay; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture;" allowfullscreen></iframe>',"undefined");break;case"obstaclepreview":closeObstaclePreview();break;case"collectionmanager":CollectionManager.Menu.Close()}break;case"g":"obstaclepreview"===View.TopmostView.toLowerCase()&&renderObstaclePreview("Gus")}}),MainMenu.Enter();