const LevelAI={Generate:function(e=1200,n=[],t=!0){var l=e;var r=function(n){const t=[];let o=[];for(let e=0;e<n.length;e++)o.push(n[e]),5===o.length&&(t.push(o),o=[]);return 0<o.length&&t.push(o),t}(n);t&&(n=>{for(let e=n.length-1;0<e;e--){var t=Math.floor(Math.random()*(e+1)),o=n[e];n[e]=n[t],n[t]=o}})(r);const a=[];for(let o=0;o<l;o+=3)for(let t=0;t<5;t+=5){const u=[];for(let n=0;n<3;n++){u[n]=[];for(let e=0;e<5;e++)try{u[n][e]=r[o+n][t+e]}catch{u[n][e]=[0]}}a.push(u)}a.sort((e,n)=>e[0].reduce((e,n)=>e+n)-n[0].reduce((e,n)=>e+n));const o=[];for(let e=0;e<a.length;e++){var s=a[e];for(let e=0;e<s.length;e++)o.push(s[e])}return function(t){var o="";for(let n=0;n<t.length;n++){for(let e=0;e<t[n].length;e++)o+=t[n][e]+",";o+="\n"}return o}(o).slice(0,-2)},PrepareForLoad:function(e){return function(e,n,t,o){for(var l=e.split(n),r="",a=0;a<l.length;a++)r+=l[a],a<l.length-1&&(r+=(a+1)%o==0?t:n);return r}(e,",",",\n",5)},RemoveRenderTiles:function(e,n){return e},Automatic:function(e){try{return PopupManager.hideMessage(),load(LevelAI.RemoveRenderTiles(LevelAI.Generate(loadedlength-1,generate(!0).replaceAll("\n","").split(","),1==e))),!0}catch(e){return PopupManager.showMessage("LevelAI was unable to generate a level based off of the level loaded in the canvas. We are sorry for the inconvenience.\n\nError Log:\n<textarea>"+JSON.stringify((t=e,Object.getOwnPropertyNames(t).reduce((e,n)=>(e[n]=t[n],e),{})))+"</textarea>","LevelAI"),!1}var t},Popups:{Begin:function(){PopupManager.showMessage("LevelAI is an experemental alogorithm that tries to put its own twist on your level.\n\n<b style=\"color:#ff5454;\">Please back up your level before using LevelAI, as this action cannot be undone!</b>\n\nLevels generated by LevelAI won't always be possible, so please only use LevelAI's generated levels as insipration for your next level!","LevelAI",["Cancel>PopupManager.hideMessage()~blue","Save Level>LevelAI.Popups.ToExport()~blue","Continue>LevelAI.Popups.Continue()~red"])},ToExport:function(){PopupManager.hideMessage(),openexport()},Continue:function(){PopupManager.showMessage('Please confirm your action.\n\n<b style="color:#ff5454;">Please back up your level before using LevelAI, as this action cannot be undone!</b>\n\nIf you want to generate a result that will be the exact same every time you use the AI on that specific level file, chose pseudo random.\n\nAnd if you want a result that is completely random and will (most likely) never repeat a previous generation but has many empty rows, chose full random.',"Confirm use of LevelAI",["Cancel>PopupManager.hideMessage()~blue","Generate Pseudo Random>LevelAI.Automatic(0)~red","Generate Full Random>LevelAI.Automatic(1)~red"])}},Navigate:function(e=""){return function(t,o,n){let l=t[0].length-1,r=t.length-1,a=[];for(;0<=r;){a.push([l,r]);let e=[[l-1,r],[l+1,r],[l,r-1]];n&&e.push([l,r+1]),0<l&&0<r&&(e.push([l-1,r-1]),e.push([l+1,r-1])),l<t[0].length-1&&0<r&&(e.push([l+1,r-1]),e.push([l-1,r-1])),e=e.filter(([e,n])=>0<=e&&0<=n&&e<t[0].length&&n<t.length&&!o.includes(t[n][e])),0===e.length?(a.pop(),[l,r]=a[a.length-1]):[l,r]=e.reduce((e,n)=>n[1]<e[1]?n:e)}return a}(function(n){const t=[];let o=[];for(let e=0;e<n.length;e++)o.push(n[e]),5===o.length&&(t.push(o),o=[]);return 0<o.length&&t.push(o),t}(e.replaceAll("\n","").split(",")),[0,9,10,11,12],!0)}};